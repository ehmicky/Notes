
                  
   CLOUDFORMATION  
                  



TO DOCUMENT:
  - AWS SAM
  - Pulumi:
     - https://www.pulumi.com/registry/packages/aws-native/api-docs/extensionresource/
     - https://www.pulumi.com/registry/packages/aws-native/api-docs/importvalue/

VERSION ==>                       #2023-09-15


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:              API              :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


PAGINATION ==>                    #Req|res: NextToken STR

REQ.Client[Request]Token          #Idempotence STR, for some ACTIONs


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:             STACK             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


CreateStack()                     #Req: STACK
                                  #  - no StackId, *Time, Description, Outputs, StackStatus*, ChangeSetId,
                                  #    DriftInformation, ParentId, RootId
                                  #  - no UsePreviousTemplate, StackPolicyDuringUpdate*
                                  #  - also ClientRequestToken
                                  #Res: STACK
                                  #  - only StackId
UpdateStack()                     #Req: STACK
                                  #  - no StackId, *Time, Description, Outputs, StackStatus*, ChangeSetId,
                                  #    DriftInformation, ParentId, RootId
                                  #  - no EnableTerminationProtection, OnFailure, Tags, TimeoutInMinutes
                                  #  - also ClientRequestToken
                                  #Res: STACK
                                  #  - only StackId
ListStacks()                      #Req: STACK
                                  #  - only StackStatus -> StackStatusFilter STR_ARR
                                  #Res: StackSummaries STACK_ARR
                                  #  - no Capabilities, ChangeSetId, DisableRollback, EnableTerminationProtection,
                                  #    NotificationARNs, Outputs, Parameters, RetainExceptOnCreate, RoleARN,
                                  #    RollbackConfiguration, Tags, TimeoutInMinutes, ResourceTypes
                                  #  - Description -> TemplateDescription
DescribeStacks()                  #Req: STACK
                                  #  - only StackName
                                  #Res: Stacks STACK_ARR
                                  #  - no Template*, UsePreviousTemplate, OnFailure, StackPolicy*, ResourceTypes
CancelUpdateStack()               #Req: STACK
                                  #  - only StackName
                                  #  - also ClientRequestToken
                                  #Res: empty
DeleteStack()                     #Req: STACK
                                  #  - only StackName, RoleARN
                                  #  - only one with RetainResources
                                  #  - also ClientRequestToken
                                  #Res: empty

STACK                             #Provisioning of a TEMPLATE
                                  #Max 20
STACK_ARN                         #arn:aws:cloudformation:REGION:ACCOUNT_ID:stack/STACK/STACK_MID

STACK.StackId                     #STACK_MID
STACK.StackName                   #'STACK'
STACK.CreationTime                #DATE
STACK.LastUpdatedTime             #DATE
STACK.DeletionTime                #DATE
STACK.Description                 #STR

STACK.StackStatus                 #'STATUS_STATE'
                                  #STATUS can be:
                                  #  - CREATE, ROLLBACK
                                  #  - UPDATE, UPDATE_ROLLBACK
                                  #  - IMPORT, IMPORT_ROLLBACK
                                  #  - UPDATE[_ROLLBACK]_COMPLETE_CLEANUP
                                  #  - REVIEW
                                  #  - DELETE
                                  #STATE can be:
                                  #  - IN_PROGRESS: only one for REVIEW and UPDATE[_ROLLBACK]_COMPLETE_CLEANUP
                                  #  - COMPLETE
                                  #  - FAILED: not for IMPORT_ROLLBACK
STACK.StackStatusReason           #STR

STACK|CHANGESET.RoleARN           #ROLE_ARN
STACK|CHANGESET.ResourceTypes     #RESTYPE_ARR

STACK|CHANGESET.Tags              #TAG_PAIRS

AWS::CloudFormation::Stack        #RESTYPE of a STACK
                                  #Allows creating child STACKs, created|updated along the parent
STACK.ParentId                    #STACK2_MID
STACK.RootId                      #STACK2_MID


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:              SET              :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


CreateStackSet()                  #Req: SET
                                  #  - also ClientRequestToken
                                  #  - StackSetId -> StackId
                                  #  - no OrganizationalUnitIds, StackSetARN, StackSetDriftDetectionDetails, Status
                                  #  - no Regions
                                  #Res: SET
                                  #  - only StackSetId
ImportStacksToStackSet()          #Req: OP
                                  #  - only OperationId, OperationPreferences, CallAs, StackSetName, StackSetId -> StackIds[Url] ARR
                                  #  - also SET: OrganizationalUnitIds
                                  #Res: OP
                                  #  - only OperationId
UpdateStackSet()                  #Req: SET
                                  #  - also OP: OperationId, DeploymentTargets, Accounts, OperationPreferences
                                  #  - only one with UsePreviousTemplate
                                  #  - no OrganizationalUnitIds, StackSetARN, StackSetDriftDetectionDetails, Status
                                  #  - no StackSetId
                                  #Res: OP
                                  #  - only OperationId
ListStackSets()                   #Req: SET
                                  #  - only Status
                                  #  - also OP: CallAs
                                  #Res: Summaries SET_ARR
                                  #  - no TemplateURL
                                  #  - no AdministrationRoleARN, Capabilities, ExecutionRoleName,
                                  #    OrganizationalUnitIds, Parameters, Regions, StackSetARN,
                                  #    StackSetDriftDetectionDetails, Tags, TemplateBody
DescribeStackSet()                #Req: SET
                                  #  - only StackSetName
                                  #  - also OP: CallAs
                                  #Res: StackSet SET
                                  #  - no TemplateURL
                                  #  - no DriftStatus, LastDriftCheckTimestamp
DeleteStackSet()                  #Req: SET
                                  #  - only StackSetName
                                  #  - also OP: CallAs
                                  #Res: empty

SET.StackSetARN                   #SET_ARN
SET|OP.StackSetId                 #SET_MID
SET|OP.StackSetName               #'SET'
SET.Description                   #STR

SET.Status                        #'ACTIVE' or 'DELETED'

SET.PermissionModel               #'SERVICE_MANAGED' or 'SELF_MANAGED'
SET|OP.AdministrationRoleARN      #ROLE_ARN
SET|OP.ExecutionRoleName          #'ROLE'

SET.ManagedExecution.Active       #BOOL (def: false)

SET.Tags                          #TAG_PAIRS

STACK_TEMPLATE.StackSetName       #'SET'|SET_MID


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           INSTANCE            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


CreateStackInstances()            #Req: INSTANCE
                                  #  - Account|Region -> Accounts|Regions ARR
                                  #  - also OP: OperationId
                                  #  - no StackSetId, StackId, LastOperationId, *Status*, *Drift*, OrganizationalUnitId
                                  #Res: OP
                                  #  - only OperationId
UpdateStackInstances()            #Req: INSTANCE
                                  #  - Account|Region -> Accounts|Regions ARR
                                  #  - also OP: OperationId
                                  #  - no StackSetId, StackId, LastOperationId, *Status*, *Drift*, OrganizationalUnitId
                                  #Res: OP
                                  #  - only OperationId
ListStackInstances()              #Req: INSTANCE
                                  #  - only StackSetName, Account|Region -> StackInstanceAccount|Region
                                  #  - only one with Filters
                                  #  - also OP: CallAs
                                  #Res: Summaries INSTANCE_ARR
                                  #  - no StackSetName, DeploymentTargets, OperationPreferences
                                  #  - no ParameterOverrides
DescribeStackInstance()           #Req: INSTANCE
                                  #  - only StackSetName, Account|Region -> StackInstanceAccount|Region
                                  #  - also OP: CallAs
                                  #Res: StackInstance INSTANCE
                                  #  - no StackSetName, DeploymentTargets, OperationPreferences
DeleteStackInstances()            #Req: INSTANCE
                                  #  - Account|Region -> Accounts|Regions ARR
                                  #  - only StackSetName, DeploymentTargets, OperationPreferences
                                  #  - also OP: OperationId, CallAs, RetainStacks
                                  #Res: OP
                                  #  - only OperationId

INSTANCE.StackSetId               #SET_MID
INSTANCE.StackSetName             #'SET'
INSTANCE.StackId                  #STACK_MID
INSTANCE.LastOperationId          #OP_MID

INSTANCE.Status                   #STR among:
                                  #  - CURRENT
                                  #  - OUTDATED
                                  #  - INOPERABLE
INSTANCE.StatusReason             #STR
INSTANCE.StackInstanceStatus      #STR among:
 .DetailedStatus                  #  - PENDING, RUNNING
                                  #  - SUCCEEDED, CANCELLED, FAILED
                                  #  - INOPERABLE
                                  #  - SKIPPED_SUSPENDED_ACCOUNT

INSTANCE.Filters                  #INSTANCE_FILTER_ARR
INSTANCE_FILTER.Name              #'PROP', for INSTANCE.PROP
                                  #Can be 'LAST_OPERATION_ID', 'DETAILED_STATUS' or 'DRIFT_STATUS'
INSTANCE_FILTER.Values            #STR_ARR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:          OPERATIONS           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


ListStackSetOperations()          #Req: OP
                                  #  - only StackSetName, CallAs
                                  #Res: Summaries OP_ARR
                                  #  - no StackSetName, CallAs
                                  #  - no AdministrationRoleARN, DeploymentTargets, ExecutionRoleName,
                                  #    RetainStacks, StackSetDriftDetectionDetails, StackSetId
                                  #  - no Accounts, Regions
DescribeStackSetOperation()       #Req: OP
                                  #  - only OperationId, StackSetName, CallAs
                                  #Res: StackSetOperation OP
                                  #  - no StackSetName, CallAs
                                  #  - no Accounts, Regions
ListStackSetOperationResults()    #Req: OP
                                  #  - only OperationId, StackSetName, CallAs
                                  #  - only one with Filters
                                  #Res: OP_RES
StopStackSetOperation()           #Req: OP
                                  #  - only OperationId, StackSetName, CallAs
                                  #Res: empty

OP.OperationId                    #OP_MID
OP.Action                         #'CREATE', 'UPDATE', 'DELETE' or 'DETECT_DRIFT'
OP.CreationTimestamp              #DATE
OP.EndTimestamp                   #DATE

OP.Status                         #STR among:
                                  #  - QUEUED, RUNNING
                                  #  - STOPPING, STOPPED
                                  #  - SUCCEEDED, FAILED
OP.StatusReason                   #STR
OP.StatusDetails
 .FailedStackInstancesCount       #NUM

OP.RetainStacks                   #BOOL

OP|INSTANCE.OperationPreferences  #SET_PREF
SET_PREF.FailureToleranceCount    #NUM
SET_PREF
 .FailureTolerancePercentage      #NUM
SET_PREF.MaxConcurrentCount       #NUM
SET_PREF.MaxConcurrentPercentage  #NUM
SET_PREF.RegionConcurrencyType    #'SEQUENTIAL' or 'PARALLEL'
SET_PREF.RegionOrder              #'REGION'_ARR

OP.Filters                        #SET_FILTER_ARR
SET_FILTER.Name                   #Always 'OPERATION_RESULT_STATUS'
SET_FILTER.Values                 #STR_ARR

OP_RES.Status                     #One of:
                                  #  - PENDING, RUNNING
                                  #  - SUCCEEDED, CANCELLED, FAILED
OP_RES.StatusReason               #STR

OP_RES.AccountGateResult          #GATE_RES
GATE_RES.Status                   #'SUCCEEDED', 'FAILED' or 'SKIPPED'
GATE_RES.StatusReason             #STR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           TEMPLATE            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


GetTemplate()                     #Req: STACK_TEMPLATE
                                  #  - only StackName, StagesAvailable STR_ARR -> TemplateStage STR
                                  #  - only one with ChangeSetName
                                  #Res: STACK_TEMPLATE
                                  #  - only TemplateBody
                                  #  - only one with StagesAvailable
GetTemplateSummary()              #Req: STACK_TEMPLATE
                                  #  - only StackName, TemplateBody, TemplateURL
                                  #  - only one with StackSetName, TemplateSummaryConfig
                                  #  - also OP: CallAs
                                  #Res: STACK_TEMPLATE
                                  #  - no StackName, TemplateBody, TemplateURL, Parameters[*].ParameterType|ParameterConstraints
                                  #  - only one with Version, ResourceTypes, ResourceIdentifierSummaries, Warnings
ValidateTemplate()                #Req: STACK_TEMPLATE
                                  #  - only TemplateBody, TemplateURL
                                  #Res: STACK_TEMPLATE
                                  #  - no StackName, TemplateBody, TemplateURL
EstimateTemplateCost()            #Req: STACK_TEMPLATE
                                  #  - only TemplateBody, TemplateUrl, STACK.Parameters
                                  #Res: STACK_TEMPLATE
                                  #  - only one with Url

STACK_TEMPLATE                    #TEMPLATE on a given STACK
STACK_TEMPLATE.StackName          #'STACK'

SET|STACK[_TEMPLATE]|CHANGESET    #'TEMPLATE' JSON as STR
 .TemplateBody                    #Max 51KB
SET|STACK[_TEMPLATE]|CHANGESET    #Same but as URL
 .TemplateURL                     #Max 460KB
SET|STACK|CHANGESET
 .UsePreviousTemplate             #BOOL. Re-use current TEMPLATE

TEMPLATE                          #Set of AWS RESOURCEs
TEMPLATE.AWSTemplateFormatVersion #Currently '2010-09-09'
[STACK_]TEMPLATE.Description      #STR

STACK_TEMPLATE.Version            #STR
SET|STACK[_TEMPLATE]|CHANGESET    #STR_ARR among:
 .Capabilities                    #  - CAPABILITY_IAM: required when using AWS::IAM::*
                                  #  - CAPABILITY_NAMED_IAM
                                  #  - CAPABILITY_AUTO_EXPAND
STACK_TEMPLATE.CapabilitiesReason #STR

STACK_TEMPLATE.DeclaredTransforms #STR_ARR
STACK_TEMPLATE.StagesAvailable    #STR_ARR among 'Original', 'Processed'

STACK_TEMPLATE.ResourceTypes      #RESTYPE_ARR
STACK_TEMPLATE
 .ResourceIdentifierSummaries     #'RESOURCE'_ARR
STACK_TEMPLATE
 .TemplateSummaryConfig
 .TreatUnrecognizedResource
 TypesAsWarnings                  #BOOL (def: false)
STACK_TEMPLATE.Warnings
 .UnrecognizedResourceTypes       #RESTYPE_ARR

STACK_TEMPLATE.Errors             #TEMPLATE_ERROR_ARR
                                  #Only syntax errors, not semantic
TEMPLATE_ERROR.Type               #STR
TEMPLATE_ERROR.Code               #STR
TEMPLATE_ERROR.Message            #STR

STACK_TEMPLATE.Url                #URL to AWS price calculator


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           RESOURCE            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


ListStackResources()              #Req: STACK_RESOURCE
                                  #  - only StackName
                                  #Res: StackResourceSummaries STACK_RESOURCE_ARR
                                  #  - no StackId, StackName, Description, Metadata
DescribeStackResources()          #Req: STACK_RESOURCE
                                  #  - only *ResourceId, StackName
                                  #Res: StackResources STACK_RESOURCE_ARR
                                  #  - no Metadata
                                  #  - LastUpdatedTimestamp -> Timestamp
DescribeStackResource()           #Req: STACK_RESOURCE
                                  #  - only LogicalResourceId, StackName
                                  #Res: StackResourceDetail STACK_RESOURCE

TEMPLATE.Resources.RESOURCE       #RESOURCE
                                  #Max 200 per TEMPLATE
RESOURCE                          #AWS resource

STACK_RESOURCE                    #RESOURCE on a given STACK_TEMPLATE
STACK_RESOURCE.LogicalResourceId  #'RESOURCE'
STACK_RESOURCE.PhysicalResourceId #MID of underlying AWS resource
RESOURCE.Type
STACK_RESOURCE.ResourceType       #'RESTYPE'
STACK_RESOURCE.StackId            #STACK_MID
STACK_RESOURCE.StackName          #'STACK'
STACK_RESOURCE
 .LastUpdatedTimestamp            #DATE
STACK_RESOURCE.Description        #STR

STACK_RESOURCE.ResourceStatus     #'STATUS_STATE'
                                  #STATUS can be:
                                  #  - CREATE, ROLLBACK
                                  #  - UPDATE, UPDATE_ROLLBACK
                                  #  - IMPORT, IMPORT_ROLLBACK
                                  #  - DELETE
                                  #STATE can be IN_PROGRESS, COMPLETE, FAILED
                                  #  - also SKIPPED with DELETE
STACK_RESOURCE
 .ResourceStatusReason            #STR

RESOURCE.Properties.RESPROP       #VAL
                                  #Usually same|similar as request payload of create|update ACTIONs of the RESTYPE

RESOURCE.DependsOn                #'RESOURCE2'
                                  #Create RESOURCE2 before RESOURCE
                                  #When deleting RESOURCE2, delete RESOURCE first

STACK_RESOURCE.ModuleInfo         #MODULE_INFO
MODULE_INFO.LogicalIdHierarchy    #STR
MODULE_INFO.TypeHierarchy         #STR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            EVENTS             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


DescribeStackEvents()             #Req: EVENT
                                  #  - only StackName
                                  #  - also ClientRequestToken
                                  #Res: StackEvents EVENT_ARR

EVENT.EventId                     #EVENT_MID
EVENT.LogicalResourceId
 |PhysicalResourceId|ResourceType
 |StackId|StackName
 |ResourceStatus[Reason]          #Like STACK_RESOURCE.*
EVENT.Timestamp                   #Like STACK_RESOURCE.LastUpdatedTimestamp

EVENT.ResourceProperties          #STR blob

EVENT.HookType
EVENT.HookFailureMode
EVENT.HookInvocationPoint         #Like CHANGE_HOOK.*
EVENT.HookStatus                  #STR among:
                                  #  - HOOK_IN_PROGRESS
                                  #  - HOOK_COMPLETE_SUCCEEDED, HOOK_COMPLETE_FAILED, HOOK_FAILED
EVENT.HookStatusReason            #STR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:        CUSTOM RESOURCE        :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


Custom::CUSTOM
AWS::CloudFormation
 ::CustomResource                 #CUSTOM_RESOURCE
CUSTOM_RESOURCE.*                 #Anything

CUSTOM_RESOURCE.ServiceToken      #SNS_TOPIC_ARN
                                  #Called on RESOURCE create|update|delete, with REQ_PAYLOAD
REQ_PAYLOAD.RequestType           #'Create|Update|Delete'
REQ_PAYLOAD.ResourceProperties    #CUSTOM_RESOURCE.*
REQ_PAYLOAD.OldResourceProperties #Previous CUSTOM_RESOURCE.*, if update
REQ_PAYLOAD.ResourceType          #'Custom:CUSTOM'
REQ|RES_PAYLOAD.LogicalResourceId #'RESOURCE'
REQ|RES_PAYLOAD.PhysicalResourceId#RESOURCE_MID, if update
REQ|RES_PAYLOAD.StackId           #STACK_MID
REQ|RES_PAYLOAD.RequestId         #REQ_ID

REQ_PAYLOAD.ResponseURL           #URL. Should send RES_PAYLOAD to it
RES_PAYLOAD.Status                #'SUCCESS|FAILED'
RES_PAYLOAD.Data                  #OBJ. Sets CUSTOM_RESOURCE.Data OBJ, e.g. with { Fn::GetAtt }
                                  #Max 4KB


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            UPDATE             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


UPDATES ==>                       #No update if no RESOURCE.RESPROP has changed
                                  #Depending on RESOURCE.RESPROP, is done:
                                  #  - NoInterruption: with an Update*()
                                  #  - MinorInterruption: with an Update*() with side-effects, e.g. EC2 instance restarting
                                  #  - Replacement: with a Delete*() then Create*()
                                  #  - ReadOnly: cannot be updated, i.e. must recreate the STACK

RESOURCE.UpdatePolicy             #UPDATE_POLICY
                                  #Only for specific RESTYPEs like AutoScaling::AutoScalingGroup or Lambda::Alias
UPDATE_POLICY
 .AutoScalingRollingUpdate        #ROLLING_POLICY
                                  #When replacing RESOURCE, do it in batches
ROLLING_POLICY.MaxBatchSize       #NUM (def: 1)
ROLLING_POLICY
 .MinInstancesInService           #NUM (def: 0)
ROLLING_POLICY.PauseTime          #'PT[..H][..M][..S]' (def: 'PT0S'). Each .. is a NUM
UPDATE_POLICY                     #BOOL. If false (def), update RESOURCE batch sizes (e.g. AutoScalingGroup.MinSize|MaxSize|DesiredCapacity)
 .AutoScalingScheduledAction      #even when value has not changed.
 .IgnoreUnmodifiedGroupSize       #Reason: some RESOURCE changes those dynamically (e.g. AutoScalingGroup scheduled policy),
  Properties                      #which might be ongoing


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           ROLLBACK            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


RollbackStack()                   #Req: STACK
                                  #  - only StackName, RoleARN, RetainExceptOnCreate
                                  #  - also ClientRequestToken
                                  #Res: STACK
                                  #  - only StackId
ContinueUpdateRollback()          #Req: STACK
                                  #  - only StackName, RoleARN
                                  #  - only one with ResourcesToSkip
                                  #  - also ClientRequestToken
                                  #Res: empty

STACK.ResourcesToSkip             #'RESOURCE'_ARR

STACK.TimeoutInMinutes            #After NUM mins (def: none), CancelUpdateStack()

STACK|CHANGESET.DisableRollback   #BOOL. If false (def), rollback Create|UpdateStack() on error|cancel

STACK.OnFailure                   #Rollback behavior:
CHANGESET.OnStackFailure          #  - 'DO_NOTHING'
                                  #  - 'ROLLBACK' (def): rollback whole create|update
                                  #  - 'DELETE': only rollback errored RESOURCE

STACK|CHANGESET
 .RollbackConfiguration           #STACK_ROLLBACK
STACK_ROLLBACK
 .MonitoringTimeInMinutes         #NUM

STACK_ROLLBACK.RollbackTriggers   #ROLLBACK_TRIGGER_ARR
ROLLBACK_TRIGGER.Type             #RESTYPE
ROLLBACK_TRIGGER.Arn              #ARN


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            DELETE             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


UpdateTerminationProtection()     #Req: STACK
                                  #  - only StackName, EnableTerminationProtection
                                  #Res: STACK
                                  #  - only StackId

STACK.EnableTerminationProtection #BOOL

STACK|CHANGESET
 .RetainExceptOnCreate            #BOOL

STACK.RetainResources             #'RESOURCE'_ARR

RESOURCE.DeletionPolicy           #When STACK is deleted, what to do with RESOURCE, among:
                                  #  - 'Delete' (def)
                                  #  - 'Retain'
                                  #  - 'Snapshot':
                                  #     - delete but create a snapshot
                                  #     - only for specific RESTYPEs like EC2::Volume, RDS::DBInstance, Redshift::Cluster


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:          CHANGE SET           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


CreateChangeSet()                 #Req: CHANGESET
                                  #  - no Changes, ChangeSetId, CreationTime, *Status*, ParentChangeSetId,
                                  #    RootChangeSetId, StackId
                                  #  - only one with ChangeSetType, ResourcesToImport
                                  #  - only one with ResourceTypes, RoleARN
                                  #  - only one with TemplateBody, TemplateURL, UsePreviousTemplate
                                  #  - also ClientToken
                                  #Res: CHANGESET
                                  #  - only ChangeSetId -> Id, StackId
ExecuteChangeSet()                #Req: CHANGESET
                                  #  - only ChangeSetName, StackName
                                  #  - only one with RetainExceptOnCreate, DisableRollback
                                  #  - also ClientRequestToken
                                  #Res: empty
ListChangeSets()                  #Req: CHANGESET
                                  #  - only StackName
                                  #Res: Summaries CHANGESET_ARR
                                  #  - no Capabilities, Changes, NotificationARNs, OnStackFailure,
                                  #    Parameters, RollbackConfiguration, Tags
DescribeChangeSet()               #Req: CHANGESET
                                  #  - only ChangeSetName, StackName
                                  #Res: CHANGESET
DeleteChangeSet()                 #Req: CHANGESET
                                  #  - only ChangeSetName, StackName
                                  #Res: empty

CHANGESET.ChangeSetId             #CHANGESET_MID
CHANGESET.ChangeSetName           #'CHANGESET'
CHANGESET.Description             #STR
CHANGESET.CreationTime            #DATE

CHANGESET.ParentChangeSetId       #CHANGESET_MID
CHANGESET.RootChangeSetId         #CHANGESET_MID
CHANGESET.IncludeNestedStacks     #BOOL

CHANGESET.StackId                 #STACK_MID
CHANGESET.StackName               #'STACK'
STACK.ChangeSetId                 #CHANGESET_MID
STACK_TEMPLATE.ChangeSetName      #'CHANGESET'|CHANGESET_ARN

CHANGESET.ChangeSetType           #'CREATE', 'UPDATE' or 'IMPORT'

CHANGESET.Status                  #STR among:
                                  #  - CREATE_PENDING, CREATE_IN_PROGRESS, CREATE_COMPLETE
                                  #  - DELETE_PENDING, DELETE_IN_PROGRESS, DELETE_COMPLETE, DELETE_FAILED
                                  #  - FAILED
CHANGESET.StatusReason            #STR
CHANGESET.ExecutionStatus         #STR among:
                                  #  - EXECUTE_IN_PROGRESS, EXECUTE_COMPLETE, EXECUTE_FAILED
                                  #  - [UN]AVAILABLE
                                  #  - OBSOLETE

CHANGESET.Changes                 #CHANGE_ARR
CHANGE.Type                       #Always 'Resource'
CHANGE.HookInvocationCount        #NUM (min 1, max 100) or null

CHANGE.ResourceChange             #RESCHANGE
RESCHANGE
 .ResourceType|LogicalResourceId
 |PhysicalResourceId|ModuleInfo   #Like STACK_RESOURCE.*
RESCHANGE.Action                  #'Add', 'Modify', 'Remove', 'Import' or 'Dynamic'
RESCHANGE.ChangeSetId             #CHANGESET_MID

RESCHANGE.Replacement             #'True', 'False' or 'Conditional'
                                  #Only with Action 'Modify'
RESCHANGE.Scope                   #STR_ARR among same values as CHANGE_TARGET.Attribute
                                  #Only with Action 'Modify'

RESCHANGE.Details                 #CHANGE_DETAIL_ARR
                                  #Only with Action 'Modify'
CHANGE_DETAIL.ChangeSource        #STR among:
                                  #  - 'ResourceReference'
                                  #  - 'ParameterReference'
                                  #  - 'ResourceAttribute'
                                  #  - 'DirectModification'
                                  #  - 'Automatic'
CHANGE_DETAIL.CausingEntity       #STR
CHANGE_DETAIL.Evaluation          #'Static' or 'Dynamic'

CHANGE_DETAIL.Target              #CHANGE_TARGET
CHANGE_TARGET.Attribute           #STR among: 'Properties', 'Metadata', 'CreationPolicy', 'UpdatePolicy', 'DeletionPolicy', 'Tag'
CHANGE_TARGET.Name                #'PROP'. Only with Attribute 'Properties'
CHANGE_TARGET.RequiresRecreation  #'Always', 'Never' or 'Conditionally'

CHANGESET.ResourcesToImport       #IMPORTED_RESOURCE_ARR
IMPORTED_RESOURCE
 .ResourceType|LogicalResourceId  #Like STACK_RESOURCE.*
IMPORTED_RESOURCE
 .ResourceIdentifier              #IMPORTED_RESPROP_ARR
IMPORTED_RESPROP.key              #'RESPROP'
IMPORTED_RESPROP.value            #'VAL'


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:             HOOKS             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


DescribeChangeSetHooks()          #Req: CHANGESET
                                  #  - only ChangeSetName, StackName
                                  #  - also RESCHANGE: LogicalResourceId
                                  #Res: CHANGESET
                                  #  - only ChangeSetId, ChangeSetName, StackId, StackName, Status
                                  #  - only one with Hooks

CHANGESET.Hooks                   #CHANGE_HOOK_ARR
CHANGE_HOOK.TypeName              #STR. Anything but usually 'ORG::SERVICE::CHANGE_HOOK'
                                  #ORG cannot be Custom, Dev, AWS|AWZN|Amazon or Alexa|ASK
CHANGE_HOOK.FailureMode           #'FAIL|WARN'
CHANGE_HOOK.InvocationPoint       #Can only be 'PRE_PROVISION'
CHANGE_HOOK.TypeVersionId         #STR
CHANGE_HOOK
 .TypeConfigurationVersionId      #STR

CHANGE_HOOK.TargetDetails         #HOOK_DETAIL
HOOK_DETAIL.TargetType            #Always 'RESOURCE'
HOOK_DETAIL.ResourceTargetDetails #HOOK_RESDETAIL
HOOK_RESDETAIL
 .ResourceType|LogicalResourceId  #Like STACK_RESOURCE.*
HOOK_RESDETAIL.ResourceAction     #Like RESCHANGE.Action


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:          PARAMETERS           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


TEMPLATE.Parameters.PARAM         #PARAM. Variable declaration in a TEMPLATE
                                  #Max 60 per TEMPLATE
STACK_TEMPLATE.Parameters         #STACK_PARAM_ARR. Variable declaration in a STACK_TEMPLATE
STACK_PARAM.ParameterKey          #'PARAM'

STACK_PARAM.ParameterType
PARAM.Type                        #'String|Number|CommaDelimitedList'
PARAM.Min|MaxLength               #'NUM'. Only with Type 'String'
PARAM.Min|MaxValue                #'NUM'. Only with Type 'Number'
PARAM.AllowedPattern              #'GLOB'
STACK_PARAM
 .ParameterConstraints
 .AllowedValues
PARAM.AllowedValues               #STR_ARR
STACK_PARAM.DefaultValue
PARAM.Default                     #STR
[STACK_]PARAM.Description         #STR
PARAM.ConstraintDescription       #STR
[STACK_]PARAM.NoEcho              #BOOL (def: false). Show '****' when read

SET|STACK|CHANGESET.Parameters
INSTANCE.ParameterOverrides       #PARAMVAL_ARR. STACK_PARAM value
PARAMVAL.ParameterKey             #'PARAM'
PARAMVAL.ParameterValue           #'VAL'
                                  #Max 4KB
PARAMVAL.UsePreviousValue         #BOOL
PARAMVAL.ResolvedValue            #'VAL', only with AWS Systems Manager

{ Ref: 'PARAM' }                  #Replaced with PARAM value

BUILT-IN PARAMS ==>               #
AWS::StackId                      #STACK_MID
AWS::StackName                    #'STACK'
AWS::AccountId                    #ACCOUNT_ID
AWS::Region                       #'REGION'
AWS::NoValue                      #undefined. Used with Fn::If


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            OUTPUTS            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


ListExports()                     #Req: empty
                                  #Res: Exports EXPORT_ARR
ListImports()                     #Req: EXPORT
                                  #  - only Name -> ExportName
                                  #Res: Imports 'STACK'_ARR

TEMPLATE.Outputs.OUTPUT           #OUTPUT. Meant to be retrieved as STACK.Outputs
                                  #Usually { Ref: ... } to show IDs of resources created of parameters passed
                                  #Max 60 per TEMPLATE
OUTPUT.Value                      #VAL
OUTPUT.Description                #STR

STACK.Outputs                     #STACK_OUTPUT_ARR
STACK_OUTPUT.OutputKey            #'OUTPUT'
STACK_OUTPUT.OutputValue          #'VAL'
STACK_OUTPUT.Description          #STR

STACK_OUTPUT.ExportName
EXPORT.Name                       #STR
EXPORT.Value                      #'VAL'
EXPORT.ExportingStackId           #STACK_MID



                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           FUNCTIONS           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


{ RFUNC: ARGS }                   #Can be used instead of any VAL

{ Ref: 'RESOURCE_MID' }           #
{ Ref: 'RESOURCE_NAME' }          #
{ Ref: 'RESOURCE_ARN' }           #
{ Ref: 'RESOURCE_URL' }           #
{ Fn::GetAtt:
 ['RESOURCE', 'RESPROP'] }        #RESOURCE.RESPROP value
{ Fn::GetAZs: 'REGION' }          #ZONE_ARR
                                  #If REGION "" (def), uses current one

TEMPLATE.Mappings.FILTER.VAR      #FILTER_OBJ
                                  #Max 100 FILTER per TEMPLATE
                                  #Max 30 VAR per FILTER
{ Fn::FindInMap:                  #Replace with FILTER.VAR.FILTER_OBJ.PROP
 ['FILTER', 'VAR', 'PROP'] }      #Used to introduce switch-like logic

TEMPLATE.Conditions.COND          #BOOL
{ Condition: 'COND' }             #Replaced by BOOL
{ Condition: 'COND', ... }        #Only output ... if COND true

{ Fn::If: [BOOL, VAL, VAL2] }     #VAL if true, VAL2 if false

{ Fn::Equals: [VAL, VAL2] }       #BOOL
{ Fn::Not: [BOOL] }               #!BOOL
{ Fn::And|Or: [BOOL,...] }        #BOOL2

{ Fn::Join: [STR, STR2_ARR] }     #STR2_ARR.join(STR)

{ Fn::Select: [NUM, ARR] }        #ARR[NUM] (0-index)

{ Fn::Base64: STR }               #STR2


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           METADATA            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


RESOURCE.Metadata                 #OBJ. Any custom property
STACK_RESOURCE.Metadata           #'OBJ_JSON'

STACK_TEMPLATE.Metadata           #STR

cfn-get-metadata --key VAR        #Prints RESOURCE.Metadata.VAR
                                  #Takes same options as cfn-init


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            POLICY             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


SetStackPolicy()                  #Req: STACK
                                  #  - only StackName, StackPolicyBody, StackPolicyURL
                                  #Res: empty
GetStackPolicy()                  #Req: STACK
                                  #  - only StackName
                                  #Res: STACK
                                  #  - only StackPolicyBody

STACK.StackPolicyBody             #'POLICY_DOC', as STR
STACK.StackPolicyDuringUpdateBody #Same but only during update (not create)
STACK.StackPolicy[DuringUpdate]URL#Like *Body, but using a 'URL'

STACK POLICY ==>                  #Resource-based POLICY with resource-level permissions
                                  #Def: allow all if not specified, deny all if specified
                                  #PACTION can only be:
                                  #  - 'Update:Modify': updating a RESOURCE with MinorInterruption
                                  #  - 'Update:Replace': updating a RESOURCE with Replacement
                                  #  - 'Update:Delete': deleting a RESOURCE
                                  #  - 'Update:*'
                                  #RESOURCE is 'LogicalResourceId/MID'
COND_KEY ResourceType             #'RESTYPE'


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:             WAIT              :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


AWS::CloudFormation::WaitCondition#RESOURCE representing an async pause
                                  #Usually uses DependsOn to specify both previous|next RESOURCE
WAITCONDITION.Handle              #{ Ref } pointing to a RESOURCE of RESTYPE AWS::CloudFormation::WaitConditionHandle, with no RESPROPs
                                  #Becomes 'HANDLE_URL', which must be called to stop the pause
                                  #  - PUT
                                  #  - no Content-Type [C]
                                  #  - request body is JSON of HANDLE_REQ
WAITCONDITION.Count               #NUM (def: 1) of times to call HANDLE_URL
WAITCONDITION.Timeout             #NUM

HANDLE_REQ.Status                 #'SUCCESS|FAILURE'
HANDLE_REQ.Reason                 #'ERROR' when failure
HANDLE_REQ.UniqueId               #STR. Do not increment WAITCONDITION.Count when using same UniqueId twice
HANDLE_REQ.Data                   #STR. Sets WAITCONDITION.Data STR, e.g. with { Fn::GetAtt }
                                  #Max 4KB

cfn-signal HANDLE_URL             #Calls HANDLE_URL
-s                                #BOOL (def: true). HANDLE_REQ.Status
-e                                #Same but as NUM, using exit code
-r                                #HANDLE_REQ.Reason
-i                                #HANDLE_REQ.UniqueId
-d                                #HANDLE_REQ.Data


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:         NOTIFICATION          :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


STACK|CHANGESET.NotificationARNs  #SNS_TOPIC_ARN_ARR

AWS::NotificationARNs             #SNS_TOPIC_ARN_ARR
                                  #Built-in PARAM


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:         ORGANIZATION          :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


ActivateOrganizationsAccess()     #Req: empty
                                  #Res: empty
                                  #Sets ORG_ACCESS.Status
DescribeOrganizationsAccess()     #Req: OP
                                  #  - only CallAs
                                  #Res: ORG_ACCESS
                                  #  - only Status
DeactivateOrganizationsAccess()   #Req: empty
                                  #Res: empty
                                  #Sets ORG_ACCESS.Status

OP.CallAs                         #'SELF' or 'DELEGATED_ADMIN'

ORG_ACCESS.Status                 #'ENABLED', 'DISABLED' or 'DISABLED_PERMANENTLY'

SET.AutoDeployment                #AUTODEPLOY
AUTODEPLOY.Enabled                #BOOL (def: false)
AUTODEPLOY
 .RetainStacksOnAccountRemoval    #BOOL (def: false)

OP|INSTANCE.DeploymentTargets     #DEPLOYMENT_TARGET_ARR
DEPLOYMENT_TARGET
 .AccountFilterType               #'INTERSECTION', 'DIFFERENCE', 'UNION' or 'NONE'
DEPLOYMENT_TARGET.Accounts        #ACCOUNT_ID_ARR
DEPLOYMENT_TARGET.AccountsUrl     #'s3|http[s]://...'
DEPLOYMENT_TARGET
 .OrganizationalUnitIds           #STR_ARR

SET.Regions                       #'REGION'_ARR
SET.OrganizationalUnitIds         #ORG_ROOT_ID|ORG_UNIT_ID_ARR
OP.Accounts                       #ACCOUNT_ID_ARR

OP_RES|INSTANCE.Region            #'REGION'
OP_RES|INSTANCE.OrganizationUnitId#ORG_ROOT_ID|ORG_UNIT_ID
OP_RES|INSTANCE.Account           #ACCOUNT_ID


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:        EXTENSIONS MAIN        :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


ActivateType()                    #Req: ETYPE
                                  #  - only Arn -> PublicTypeArn, TypeName, TypeNameAlias, AutoUpdate,
                                  #    Type, ExecutionRoleArn, LoggingConfig, PublisherId
                                  #  - only one with MajorVersion, VersionBump
                                  #Res: ETYPE
                                  #  - only Arn
ListTypes()                       #Req: ETYPE
                                  #  - only DeprecatedStatus, Type, Visibility, ProvisioningType
                                  #  - TypeName|Category|PublisherId -> Filters.TypeNamePrefix|Category|PublisherId
                                  #Res: TypeSummaries ETYPE_ARR
                                  #  - only Arn -> TypeArn, TypeName, LastUpdated, Description, DefaultVersionId,
                                  #    PublicVersionNumber, LatestPublicVersion, IsActivated, OriginalTypeName,
                                  #    Type, PublisherId, PublisherIdentity, PublisherNumber
DescribeType()                    #Req: ETYPE
                                  #  - only Arn, TypeName, VersionId, PublicVersionNumber, Type, PublisherId
                                  #Res: ETYPE
                                  #  - no TypeNameAlias, VersionId, Category, PublisherName, PublisherStatus
DeactivateType()                  #Req: ETYPE
                                  #  - only Arn, TypeName, Type
                                  #Res: empty

ETYPE.Arn                         #ETYPE_ARN
ETYPE.TypeName                    #'ETYPE'
[REQUIRED_]ETYPE.TypeNameAlias    #'ETYPE_ALIAS'
ETYPE.TimeCreated                 #DATE
ETYPE.LastUpdated                 #DATE

ETYPE.Description                 #STR
ETYPE.DocumentationUrl            #'URL'
ETYPE.SourceUrl                   #'URL'

ETYPE.OriginalTypeArn             #ETYPE_ARN
[REQUIRED_]ETYPE.OriginalTypeName #'ETYPE'

ETYPE.Category                    #'REGISTERED', 'ACTIVATED', 'THIRD_PARTY', 'AWS_TYPES'
ETYPE.Type                        #'RESOURCE', 'MODULE', 'HOOK'
ETYPE.ProvisioningType            #'NON_PROVISIONABLE', 'IMMUTABLE' or 'FULLY_MUTABLE'
ETYPE.ExecutionRoleArn            #ROLE_ARN

ETYPE.RequiredActivatedTypes      #REQUIRED_ETYPE_ARR
REQUIRED_ETYPE
 .SupportedMajorVersions          #NUM_ARR

ETYPE.Schema                      #'JSON'
ETYPE.SchemaHandlerPackage        #S3_BUCKET_URL

ETYPE.LoggingConfig               #ETYPE_LOG
ETYPE_LOG.LogGroupName            #CloudWatch 'LOG_GROUP'
ETYPE_LOG.LogRoleArn              #ROLE_ARN


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:      EXTENSIONS VERSION       :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


SetTypeDefaultVersion()           #Req: ETYPE
                                  #  - only Arn, TypeName, Type, VersionId
                                  #Res: empty
                                  #Sets ETYPE.DefaultVersionId
PublishType()                     #Req: ETYPE
                                  #  - only Arn, TypeName, Type, PublicVersionNumber
                                  #Res: ETYPE
                                  #  - only Arn -> PublicTypeArn
ListTypeVersions()                #Req: ETYPE
                                  #  - only Arn, TypeName, DeprecatedStatus, Type, PublisherId
                                  #Res: TypeVersionSummaries ETYPE_ARR
                                  #  - only Arn, TypeName, TimeCreated, Description, VersionId, IsDefaultVersion, PublicVersionNumber, Type

ETYPE.VersionId                   #STR

ETYPE.DefaultVersionId            #STR
ETYPE.MajorVersion                #NUM
ETYPE.VersionBump                 #'MAJOR|MINOR'
ETYPE.IsDefaultVersion            #BOOL

ETYPE.PublicVersionNumber         #STR
ETYPE.LatestPublicVersion         #BOOL

ETYPE.AutoUpdate                  #BOOL

ETYPE.IsActivated                 #BOOL|null
ETYPE.Visibility                  #'PUBLIC|PRIVATE'

ETYPE.DeprecatedStatus            #'LIVE|DEPRECATED'


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:   EXTENSIONS CONFIGURATION    :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


SetTypeConfiguration()            #Req: ETYPE_CONF
                                  #  - Alias -> ConfigurationAlias
                                  #  - no Arn, LastUpdated, IsDefaultConfiguration
                                  #Res: ETYPE
                                  #  - only Arn -> ConfigurationArn
BatchDescribeTypeConfigurations() #Req: ETYPE_CONF
                                  #  - Arn|Alias -> TypeConfigurationArn|Alias
                                  #  - no Configuration, LastUpdated, IsDefaultConfiguration
                                  #Res: ETYPE_CONFS

ETYPE_CONFS.TypeConfigurations    #ETYPE_CONF_ARR (no Type)
ETYPE_CONFS
 .UnprocessedTypeConfigurations   #ETYPE_CONF_ARR. Same shape as BatchDescribeTypeConfigurations() request

ETYPE_CONFS.Errors                #ETYPE_CONF_ERROR_ARR
ETYPE_CONF_ERROR.ErrorCode        #STR
ETYPE_CONF_ERROR.ErrorMessage     #STR
ETYPE_CONF_ERROR
 .TypeConfigurationIdentifier     #ETYPE_CONF. Same shape as BatchDescribeTypeConfigurations() request

ETYPE_CONF.Arn                    #ETYPE_CONFIG_ARN
ETYPE_CONF.Alias                  #'ETYPE_CONFIG_ALIAS'
ETYPE_CONF.LastUpdated            #DATE

ETYPE_CONF.TypeArn|TypeName|Type  #Like ETYPE.*
ETYPE.ConfigurationSchema         #'JSON'

ETYPE_CONF.Configuration          #'OBJ_JSON'
ETYPE_CONF.IsDefaultConfiguration #BOOL


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:      EXTENSIONS REGISTER      :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


RegisterType()                    #Req: ETYPE
                                  #  - only TypeName, Type, ExecutionRoleArn, LoggingConfig
                                  #  - only one with SchemaHandlerPackage
                                  #  - also ClientRequestToken
                                  #Res: ETYPE_REGISTER
                                  #  - only RegistrationToken
ListTypeRegistrations()           #Req: ETYPE
                                  #  - only Arn -> TypeArn, TypeName, Type
                                  #  - also ETYPE_REGISTER: ProgressStatus -> RegistrationStatusFilter STR (def: 'IN_PROGRESS')
                                  #Res: RegistrationTokenList STR_ARR (ETYPE_REGISTER.RegistrationToken)
DescribeTypeRegistration()        #Req: ETYPE_REGISTER
                                  #  - only RegistrationToken
                                  #Res: ETYPE_REGISTER
                                  #  - no RegistrationToken
DeregisterType()                  #Req: ETYPE
                                  #  - only Arn, TypeName, Type, VersionId
                                  #Res: empty

ETYPE_REGISTER.RegistrationToken  #STR
ETYPE_REGISTER.Description        #STR

ETYPE_REGISTER.ProgressStatus     #'IN_PROGRESS', 'COMPLETE' or 'FAILED'

ETYPE_REGISTER.TypeArn            #ETYPE_ARN
                                  #Only with ProgressStatus 'COMPLETE'
ETYPE_REGISTER.TypeVersionArn     #ETYPE_ARN
                                  #Only with ProgressStatus 'COMPLETE'


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:        EXTENSIONS TEST        :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


TestType()                        #Req: ETYPE
                                  #  - Arn, TypeName, Type, VersionId
                                  #  - only one with LogDeliveryBucket
                                  #Res: ETYPE
                                  #  - Arn -> TypeVersionArn

ETYPE.LogDeliveryBucket           #'S3_BUCKET'

ETYPE.TypeTestsStatus             #STR among:
                                  #  - NOT_TESTED
                                  #  - IN_PROGRESS
                                  #  - PASSED, FAILED
ETYPE.TypeTestsStatusDescription  #STR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           PUBLISHER           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


RegisterPublisher()               #Req: PUBLISHER
                                  #  - only AcceptTermsAndConditions, ConnectionArn
                                  #Res: PUBLISHER
                                  #  - only PublisherId
DescribePublisher()               #Req: PUBLISHER
                                  #  - only PublisherId
                                  #Res: PUBLISHER
                                  #  - no AcceptTermsAndConditions, ConnectionArn

PUBLISHER.PublisherId             #PUBLISHER_MID
[REQUIRED_]ETYPE.PublisherId      #PUBLISHER_MID
ETYPE.PublisherName               #'PUBLISHER'
PUBLISHER.PublisherStatus         #'[UN]VERIFIED'

PUBLISHER.IdentityProvider
ETYPE.PublisherIdentity           #'GitHub', 'Bitbucket' or 'AWS_Marketplace'
PUBLISHER.ConnectionArn           #CONNECTION_ARN. Not if IdentityProvider 'AWS_Marketplace'
PUBLISHER.PublisherProfile        #'URL' (http[s])

PUBLISHER.AcceptTermsAndConditions#BOOL (def: false)


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           CFN-INIT            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


cfn-*                             #"Helper scripts"
                                  #Version 2.0-26

/opt/aws/bin/cfn-*                #cfn-* location in EC2 instances
                                  #Can also be downloaded from online documentation

cfn-init                          #Initialize current machine based on EC2 metadata
                                  #Wrapper around cloud-init
-s                                #STACK
-r                                #RESOURCE
--region                          #REGION
-v                                #

RESOURCE.Metadata
 ["AWS::CloudFormation::Init"]
 .config                          #CFN_CONF

CFN_CONF.packages                 #CFN_PACKAGES
CFN_PACKAGES.PACKAGE_MANAGER      #'PATH|VERSION'. Install packages
                                  #PACKAGE_MANAGER can be yum|rpm|rubygems|apt

CFN_CONF.sources.DIR              #'URL'. Uncompress URL to DIR. For .tar[.gz|bz2] or .zip

CFN_CONF.files.FILE_PATH          #CFN_FILE. Create a file
CFN_FILE.content                  #STR
CFN_FILE.source                   #URL. Alternative to CFN_FILE.content
CFN_FILE.encoding                 #'plain' (def) or 'base64'
CFN_FILE.mode                     #STR. Unix file permission
CFN_FILE.owner                    #STR
CFN_FILE.group                    #STR
CFN_FILE.context                  #OBJ. Used as Mustache template
                                  #Must have aws-cfn-bootstrap and pystache installed

CFN_FILE.authentication           #'CFN_AUTH'. Authentication when retriving CFN_FILE.source
RESOURCE.Metadata["AWS::
 CloudFormation::Authentication"]
 .CFN_AUTH                        #CFN_AUTH
CFN_AUTH.type                     #Either 'basic' or 's3'
(if basic)
CFN_AUTH.username                 #STR
CFN_AUTH.password                 #STR
CFN_AUTH.uris                     #URL_ARR
(if s3)
CFN_AUTH.buckets                  #'BUCKET'_ARR
--access-key
CFN_AUTH.accessKeyId              #ACCESS_KEY_ID
--credential-file
--secret-key
CFN_AUTH.secretKey                #SECRET_KEY_ID
--role
CFN_AUTH.roleName                 #'ROLE'

CFN_CONF.users.USER               #CFN_USER. OS user to create
CFN_USER.uid                      #STR
CFN_USER.groups                   #'GROUP'_ARR
CFN_USER.homeDir                  #PATH

CFN_CONF.groups.GROUP             #CFN_GROUP. OS group to create
CFN_GROUP.gid                     #STR

CFN_CONF.commands.ANY             #CFN_COMMAND. OS command to run, in alphabetical order
CFN_CONF.container_commands.ANY   #CFN_COMMAND. Run before CFN_CONF.commands
                                  #Have access to AWS credentials ENVVARs
CFN_COMMAND.command               #'SHELL_COMMAND' or ['COMMAND', 'ARG',...]
CFN_COMMAND.test                  #'SHELL_COMMAND'. Do not run command if test exit code non-0
CFN_COMMAND.cwd                   #PATH
CFN_COMMAND.env.ENVVAR            #VAL
CFN_COMMAND.ignoreErrors          #BOOL. If false (def), abort on first failed command
CFN_COMMAND.leader_only           #BOOL (def: false). Execute only on one instance in an AutoScalingGroup
                                  #Only with CFN_CONF.container_commands

CFN_CONF.services.sysvinit.SERVICE#CFN_SERVICE. SysvInit daemon to define
CFN_SERVICE.enabled               #BOOL (def: false). Start at boot
CFN_SERVICE.ensureRunning         #BOOL (def: false). Wait for SERVICE to run before declaring machine as done starting
CFN_SERVICE.files                 #'PATH'[_ARR]. Restart SERVICE on change
CFN_SERVICE.sources               #Same with 'DIR'[_ARR]
CFN_SERVICE.packages              #CFN_PACKAGES. Restart SERVICE on install|update of those packages
CFN_SERVICE.commands              #'COMMAND'. Restart SERVICE when 'COMMAND' executed


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            CFN-HUP            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


cfn-hup -c DIR                    #Daemon that executes commands when RESOURCE.* changes

DIR/NAME.conf                     #{ NAME: HUP_COMMAND }. Ini file
HUP_COMMAND.action                #'SHELL_COMMAND'
HUP_COMMAND.runas                 #'OS_USER'
HUP_COMMAND.path                  #STR. What to watch among:
                                  #  - 'Resources.RESOURCE': RESOURCE.*
                                  #  - 'Resources.RESOURCE.PhysicalResourceId'
                                  #  - 'Resources.RESOURCE.Metadata[(PATH)]'
HUP_COMMAND.triggers              #'post.add|update|remove': watch RESPROPs create|update|delete

DIR/cfn-hup.conf                  #{ main: HUP_CONF }. Ini file
HUP_CONF.interval                 #NUM (def: 10) of minutes to poll for changes
HUP_CONF.stack                    #STACK_MID
HUP_CONF.region                   #REGION
HUP_CONF.credential-file          #'PATH' to CREDS file
HUP_CONF.verbose                  #BOOL (def: false)


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:             DRIFT             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


DetectStackSetDrift()             #Req: SET
                                  #  - only StackSetName
                                  #  - also OP: OperationId, CallAs, OperationPreferences
                                  #Res: OP
                                  #  - only OperationId

DetectStackDrift()                #
DescribeStackDrift
 DetectionStatus()                #

DetectStackResourceDrift()        #
ListStackInstanceResourceDrifts() #Req: RESOURCE_DRIFT
                                  #  - only StackResourceDriftStatus STR -> StackResourceDriftStatusFilters STR_ARR
                                  #  - only StackId -> StackName
                                  #  - also INSTANCE: StackInstanceAccount, StackInstanceRegion
                                  #  - also OP: OperationId, CallAs
                                  #Res: Summaries RESOURCE_DRIFT_ARR
                                  #  - no ActualProperties, ExpectedProperties, ModuleInfo
DescribeStackResourceDrifts()     #Req: RESOURCE_DRIFT
                                  #  - only StackResourceDriftStatus STR -> StackResourceDriftStatusFilters STR_ARR
                                  #  - only StackId -> StackName
                                  #Res: StackResourceDrifts RESOURCE_DRIFT_ARR

SET|OP
 .StackSetDriftDetectionDetails   #SET_DETECTION
SET_DETECTION                     #One of:
 .DriftDetectionStatus            #  - IN_PROGRESS, STOPPED
                                  #  - PARTIAL_SUCCESS, COMPLETED, FAILED
SET[_DETECTION]
 .LastDriftCheckTimestamp         #DATE
SET[_DETECTION].DriftStatus       #One of 'IN_SYNC', 'DRIFTED', 'NOT_CHECKED'
SET_DETECTION
 .TotalStackInstancesCount        #NUM
SET_DETECTION
 .InProgressStackInstancesCount   #NUM
SET_DETECTION
 .FailedStackInstancesCount       #NUM
SET_DETECTION
 .InSyncStackInstancesCount       #NUM
SET_DETECTION
 .DriftedStackInstancesCount      #NUM

STACK.DriftInformation            #STACK_DRIFT
STACK_DRIFT.LastCheckTimestamp    #DATE
STACK_DRIFT.StackDriftStatus      #One of 'IN_SYNC', 'DRIFTED', 'NOT_CHECKED'

INSTANCE.LastDriftCheckTimestamp  #DATE
INSTANCE.DriftStatus              #One of 'IN_SYNC', 'DRIFTED', 'NOT_CHECKED'

STACK_RESOURCE.DriftInformation   #RESOURCE_DRIFT
                                  #  - only Timestamp -> LastCheckTimestamp, StackResourceDriftStatus
RESOURCE_DRIFT.Timestamp          #DATE
RESOURCE_DRIFT
 .StackResourceDriftStatus        #One of 'IN_SYNC', 'MODIFIED', 'DELETED', 'NOT_CHECKED'

RESOURCE_DRIFT.LogicalResourceId
 |PhysicalResourceId|ResourceType
 |StackId|ModuleInfo              #Like STACK_RESOURCE.*
RESOURCE_DRIFT
 .PhysicalResourceIdContext       #RESID_CONTEXT_ARR
RESID_CONTEXT.Key                 #STR
RESID_CONTEXT.Value               #STR

RESOURCE_DRIFT.ActualProperties   #'OBJ_JSON'
                                  #Not with StackResourceDriftStatus 'DELETED'
RESOURCE_DRIFT.ExpectedProperties #'OBJ_JSON'
                                  #Not with StackResourceDriftStatus 'DELETED'
                                  #Same as ActualProperties unless StackResourceDriftStatus 'MODIFIED'
RESOURCE_DRIFT.PropertyDifferences#RESPROP_DIFF_ARR
                                  #Only with StackResourceDriftStatus 'MODIFIED'
RESPROP_DIFF.ActualValue          #'VAL'
RESPROP_DIFF.ExpectedValue        #'VAL'
RESPROP_DIFF.DifferenceType       #'ADD', 'REMOVE' or 'NOT_EQUAL'
RESPROP_DIFF.PropertyPath         #STR


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            TO SORT            :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


RecordHandlerProgress()           #

SignalResource()                  #

DescribeAccountLimits()           #
