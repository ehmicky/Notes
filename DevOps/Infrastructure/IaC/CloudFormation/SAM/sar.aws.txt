
                                  ┏━━━━━━━━━┓
                                  ┃   SAR   ┃
                                  ┗━━━━━━━━━┛

VERSION ==>                       #2024-11-05

SAM CLI ==>                       #See its doc
SAM TRANSFORM ==>                 #See its doc

SAR                               #AWS Serverless Application Repository

                                  ┌─────────────┐
                                  │   TO SORT   │
                                  └─────────────┘

sam publish                       #Publish package to SAR
--fail-on-same-version            #BOOL (def: false). Fail if version already exists

TEMPLATE.Metadata['AWS::
 ServerlessRepo::Application']    #APP_METADATA. Must be set to publish

APP_METADATA.SemanticVersion      #'APP_VERSION'
sam publish --semantic-version    #Overrides APP_METADATA.SemanticVersion

                                  ┌─────────┐
                                  │   API   │
                                  └─────────┘

serverlessrepo.amazonaws.com      #SERVICE_DOMAIN

FORMAT ==>                        #JSON REST
                                  #Query parameters for GET

ERRORS ==>                        #OBJ: errorCode, message
                                  #Also uses status code

PAGINATION ==>                    #Uses REQ.maxItems + REQ|RES.nextToken

                                  ┌─────────────────┐
                                  │   APPLICATION   │
                                  └─────────────────┘

POST /applications                #Req: APP
CreateApplication()               #  - no applicationId, *verifiedAuthor*, creationTime
                                  #  - version.* -> *
                                  #     - no creationTime, requiredCapabilities, resourcesSupported
                                  #Res: APP
                                  #  - no *Body
PATCH /applications/APP_ID        #Req: APP
UpdateApplication()               #  - no applicationId, *verifiedAuthor*, creationTime
                                  #  - no version, name, spdxLicenseId, license*
                                  #Res: APP
                                  #  - no *Body
GET /applications                 #Req: none
ListApplications()                #Res: applications APP_ARR
                                  #  - no version, *verifiedAuthor*, license*, readme*
GET /applications/APP_ID          #Req: APP
GetApplication()                  #  - only version.semanticVersion
                                  #Res: APP
                                  #  - no *Body
DELETE /applications/APP_ID       #Req: none
DeleteApplication()               #Res: none

APP[_VERSION].applicationId       #'APP_ID'
APP.name                          #'APP'
APP.description                   #STR
APP.author                        #STR
APP.isVerifiedAuthor              #BOOL
APP.verifiedAuthorUrl             #STR
APP.spdxLicenseId                 #STR
APP.licenseBody                   #STR
APP.licenseUrl                    #STR
APP.readmeBody                    #STR
APP.readmeUrl                     #STR
APP.labels                        #STR_ARR
APP.creationTime                  #STR
APP.homePageUrl                   #STR

                                  ┌─────────────┐
                                  │   VERSION   │
                                  └─────────────┘

PUT /applications/APP_ID          #Req: APP_VERSION
 /versions/APP_VERSION            #  - no semanticVersion, creationTime, requiredCapabilities, resourcesSupported, parameterDefinitions
CreateApplicationVersion()        #Res: APP_VERSION
                                  #  - no templateBody
GET /applications/APP_ID/versions #Req: none
ListApplicationVersions()         #Res: versions APP_VERSION_ARR
                                  #  - no sourceCodeArchiveUrl, templateBody, requiredCapabilities, resourcesSupported, parameterDefinitions

APP.version                       #APP_VERSION
APP_VERSION.semanticVersion       #'APP_VERSION'
APP_VERSION.sourceCodeUrl         #STR
APP_VERSION.sourceCodeArchiveUrl  #STR
APP_VERSION.templateBody          #STR
APP_VERSION.templateUrl           #STR
APP_VERSION.creationTime          #STR
APP_VERSION.requiredCapabilities  #STR_ARR
APP_VERSION.resourcesSupported    #BOOL

                                  ┌────────────────┐
                                  │   PARAMETERS   │
                                  └────────────────┘

APP_VERSION.parameterDefinitions  #PARAMDEF_ARR
PARAMDEF.name                     #STR
PARAMDEF.defaultValue             #STR
PARAMDEF.description              #STR
PARAMDEF.type                     #STR
PARAMDEF.noEcho                   #BOOL
PARAMDEF.allowedPattern           #STR
PARAMDEF.constraintDescription    #STR
PARAMDEF.minValue                 #NUM
PARAMDEF.maxValue                 #NUM
PARAMDEF.minLength                #NUM
PARAMDEF.maxLength                #NUM
PARAMDEF.allowedValues            #STR_ARR
PARAMDEF.referencedByResources    #STR_ARR

APP_CHANGESET.parameterOverrides  #PARAM_VALUE_ARR
PARAM_VALUE.name                  #STR
PARAM_VALUE.value                 #STR

                                  ┌──────────────┐
                                  │   TEMPLATE   │
                                  └──────────────┘

POST                              #Req: APP_TEMPLATE
 /applications/APP_ID/templates   #  - no applicationId, template*, status, *Time
CreateCloudFormationTemplate()    #Res: APP_TEMPLATE
GET /applications/APP_ID
 /templates/APP_TEMPLATE          #Req: empty
GetCloudFormationTemplate()       #Res: APP_TEMPLATE

APP_TEMPLATE.templateId           #'APP_TEMPLATE'
APP_TEMPLATE.templateUrl          #STR
APP_TEMPLATE.applicationId        #'APP_ID'
APP_TEMPLATE.semanticVersion      #STR
APP_TEMPLATE.status               #STR
APP_TEMPLATE.creationTime         #STR
APP_TEMPLATE.expirationTime       #STR

                                  ┌───────────────┐
                                  │   CHANGESET   │
                                  └───────────────┘

POST                              #Req: APP_CHANGESET
 /applications/APP_ID/changesets  #  - no applicationId, changeSetId, stackId
CreateCloudFormationChangeSet()   #Res: APP_CHANGESET
                                  #  - only applicationId, semanticVersion, changeSetId, stackId

APP_CHANGESET.changeSetId         #STR
APP_CHANGESET.changeSetName       #STR
APP_CHANGESET.stackId             #STR
APP_CHANGESET.stackName           #STR
APP_CHANGESET.semanticVersion     #STR
APP_CHANGESET.applicationId       #STR
APP_CHANGESET.templateId          #STR
APP_CHANGESET.capabilities        #STR_ARR
APP_CHANGESET.clientToken         #STR
APP_CHANGESET.description         #STR
APP_CHANGESET.notificationArns    #STR_ARR
APP_CHANGESET.resourceTypes       #STR_ARR
APP_CHANGESET
 .rollbackConfiguration           #ROLLBACK
ROLLBACK.monitoringTimeInMinutes  #NUM
ROLLBACK.rollbackTriggers         #ROLLBACK_TRIGGER_ARR
ROLLBACK_TRIGGER.arn              #STR
ROLLBACK_TRIGGER.type             #STR
APP_CHANGESET.tags                #TAG_PAIRS, i.e. OBJ_ARR: key|value STR

                                  ┌────────────┐
                                  │   POLICY   │
                                  └────────────┘

PUT /applications/APP_ID/policy   #Req: APP_POLICY
PutApplicationPolicy()            #Res: APP_POLICY
GET /applications/APP_ID/policy   #Req: empty
GetApplicationPolicy()            #Res: APP_POLICY

APP_POLICY.statements             #APP_STATEMENT_ARR
APP_STATEMENT.statementId         #STR
APP_STATEMENT.principals          #STR_ARR
APP_STATEMENT.actions             #STR_ARR
APP_STATEMENT.principalOrgIDs     #STR_ARR

                                  ┌─────────────┐
                                  │   UNSHARE   │
                                  └─────────────┘

POST /applications/APP_ID/unshare #Req: APP_UNSHARE
UnshareApplication()              #Res: none

APP_UNSHARE.organizationId        #'ORG_ID'

                                  ┌──────────────────┐
                                  │   DEPENDENCIES   │
                                  └──────────────────┘

GET                               #Req: APP_VERSION
 /applications/APP_ID/dependencies#  - only semanticVersion
ListApplicationDependencies()     #Res: dependencies APP_VERSION
                                  #  - only semanticVersion, applicationId
