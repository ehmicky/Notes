
                                  ┏━━━━━━━━━━━━━━━━━━━┓
                                  ┃   SAM_TRANSFORM   ┃
                                  ┗━━━━━━━━━━━━━━━━━━━┛

VERSION ==>                       #1.92.0

SAM CLI ==>                       #See its doc
                                  #Does not require SAM transform: supports regular RESTYPEs
                                  #However, does support SAM transform: AWS::Serverless::* RESTYPEs
                                  #Is not required by SAM transform: since transformation happens inside CloudFormation, not locally

AWS::Serverless::Application      #See SAR doc

                                  ┌───────────────┐
                                  │   TRANSFORM   │
                                  └───────────────┘

TEMPLATE.Transform                #Must include 'AWS::Serverless-2016-10-31'
                                  #If has 'AWS::LanguageExtensions', must be after it
                                  #  - recommended to use !RFUNCs inside SAM-specific RESPROPs
                                  #Transforms AWS::Serverless::* RESTYPEs into regular ones

TRANSFORMATION ==>                #Happens inside CloudFormation itself, not locally
                                  #I.e. any CloudFormation-related tool:
                                  #  - in order to support TEMPLATEs with SAM transform
                                  #  - must be enhanced to handle AWS::Serverless::* RESTYPEs and TEMPLATE.Globals

                                  ┌────────────┐
                                  │   BINARY   │
                                  └────────────┘

sam-translate                     #CLI that does the transformation
                                  #Mostly meant for debugging: the official flow is to let CloudFormation API do the transform
                                  #Does not seem to be published, i.e. must:
                                  #  - git clone
                                  #  - python -r requirements/dev.txt
                                  #  - python bin/sam-translate.py
--template-file                   #'PATH' (def: 'template.yaml')
--output-template                 #'PATH' (def: 'transformed-template.json')
--stdout                          #Output to stdout

sam translate package             #Same but first do `aws cloudformation package` first, using temporary ._sam_packaged_.yaml
--verbose
--s3-bucket                       #Passed to `aws cloudformation package`

sam translate deploy              #Same but first do `aws cloudformation deploy` afterwards (not very useful)
--capabilities
--stack-name                      #Passed to `aws cloudformation deploy`

                                  ┌──────────┐
                                  │   LINT   │
                                  └──────────┘

cfn-lint E3038                    #AWS::Serverless TRANSFORM must be declared if using AWS::Serverless::* RESTYPEs

                                  ┌─────────────┐
                                  │   GLOBALS   │
                                  └─────────────┘

TEMPLATE.Globals.TYPE.RESPROPS    #OBJ. Default RESPROPs
                                  #Only for AWS::Serverless::*
                                  #OBJs are deeply merged, ARRs are prepended
                                  #Also applies to AWS::ApiGateway[V2]::* implicited created by AWS::Serverless::Function EventSource of Type 'Api'

NOT SUPPORTED ==>                 #AWS::Serverless::[Http]Api: DefinitionBody, Description, DisableExecuteApiEndpoint, FailOnWarnings, StageName
                                  #AWS::Serverless::Api: AlwaysDeploy, ApiKeySourceType, MergeDefinitions, Mode, Models, Tags
                                  #AWS::Serverless::HttpApi: CorsConfiguration, DefaultRouteSettings, DefinitionUri, Domain, Name, RouteSettings
                                  #AWS::Serverless::Function: AutoPublishAliasAllProperties, AutoPublishCodeSha256, CodeSigningConfigArn, Events,
                                  # FileSystemConfigs, FunctionName, FunctionUrlConfig, ImageConfig, ImageUri, InlineCode, LoggingConfig, PackageType,
                                  # Policies, RecursiveLoop, Role, RolePath, RuntimeManagementConfig, SnapStart, SourceKMSKeyArn, VersionDescription
                                  #AWS::Serverless::StateMachine: all but PropagateTags
                                  #AWS::Serverless::SimpleTable: all but SSESpecification
                                  #AWS::Serverless::LayerVersion|GraphQLApi|Connector

                                  ┌─────────────────────┐
                                  │   TRANSFORMATIONS   │
                                  └─────────────────────┘

{ Ref: 'SAM_RESOURCE' }           #Replaced by { Ref: 'RESOURCE' }
                                  #'SAM_RESOURCE' is an alternative to 'RESOURCE', that is human-friendlier
'RESOURCE'                        #Most AWS::Serverless::* do not have much RESATTRs
                                  #Instead must either:
                                  #  - use 'SAM_RESOURCE'
                                  #  - guess 'RESOURCE' based on known pattern
                                  #Some include a 'HASH' part
                                  #  - i.e. only change when some of its RESPROPs change
                                  #  - i.e. must target using 'SAM_RESOURCE'

RESOURCE.Metadata|DependsOn       #On AWS::Serverless::*, only applies to the generated main RESOURCE
RESOURCE.Condition|*Policy        #On AWS::Serverless::*, applies to all generated RESOURCEs

TAG 'SERVICE:createdBy'           #With value 'SAM'. Added to most generated RESOURCEs

                                  ┌──────────────────┐
                                  │   REST API SAM   │
                                  └──────────────────┘

AWS::Serverless::[Http]Api      =-#Expands to API Gateway v1|v2 HTTP (not WebSocket):
                                  #  - API
                                  #  (through OSPEC)
                                  #  - INTEGRATION
                                  #  - MODEL
                                  #  - AUTHORIZER
                                  #  - GRESP
                                  #  - CORS-related ROUTE
                                  #  (optional)
                                  #  - STAGE
                                  #  - DEPLOYMENT
                                  #  - DNAME
                                  #  - multiple MAPPINGs
                                  #  - Lambda PERMISSIONs
                                 =#  - USAGEPLAN
                                 =#  - USAGEKEY
                                 =#  - APIKEY
                                  #Also to Route53 RECORD_SET
                                  #Includes RESPROPs:
                                  #  - Name
                                  #     - def: 'STACK'
                                 -#     - using OINFO.title
                                  #  - Description
                                 -#     - using OINFO.description
                                  #  - Tags OBJ
                                 -#     - using OTAGs
                                  #  - PropagateTags BOOL: whether Tags targets:
                                  #     - false (def): STAGE
                                  #     - true: most generated RESOURCEs, including API

MISSING FEATURES ==>            =-#Requires OpenAPI specification to set most RESOURCEs (including ROUTEs)
                                  #Multiple STAGEs per API, i.e. must use PARAM and instantiate STACK once per STAGE instead
                                  #Most name|description automatically generated
                                =-#API.cloneFrom|target
                                 =#API_IMPORT.ignore
                                 =#CCERTIFICATE
                                 =#APIKEY.enabled|value|customerId
                                  #Route53 RECORD_SET.CidrRoutingConfig|Comment|Failover|Geo*
                                  #  |HealthCheckId|MultiValueAnswer|Name|ResourceRecods|TTL|Weight

AWS::Serverless::Function       =-#Includes RESPROPs: Events.EVENT:
                                  #  - Type '[Http]Api': can create a AWS::Serverless::Api for Lambda INTEGRATION (see below)

                                  ┌──────────────────┐
                                  │   PAYLOADS SAM   │
                                  └──────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs:
                                  #  - MinimumCompressionSize
                                  #  - BinaryMediaTypes (JSON pointer encoded)
                                  #     - using both API.* and OSPEC.x-amazon-apigateway-binary-media-types

                                  ┌──────────────────┐
                                  │   RESOURCE SAM   │
                                  └──────────────────┘

AWS::Serverless::[Http]Api       =#Includes RESATTRs: RootResourceId

                                  ┌───────────────────────┐
                                  │   ROUTE REQUEST SAM   │
                                  └───────────────────────┘

AWS::Serverless::Function       =-#Includes RESPROPs: Events.EVENT:
                                  #  - Type '[Http]Api': can create a ROUTE for Lambda INTEGRATION (see below)
                                  #  - Properties:
                                 =#     - RequestParameters ARR of either 'EXPR' or OBJ: EXPR: Required BOOL (def: false)
                                  #        - using OPARAM.type|in|name|required
                                 =#     - RequestModel:
                                  #        - Model 'MODEL': using OPARAM.schema|in|name
                                  #        - Required BOOL: using OPARAM.required

                                  ┌─────────────────────────────┐
                                  │   INTEGRATION REQUEST SAM   │
                                  └─────────────────────────────┘

AWS::Serverless::[Http]Api       =#Includes RESPROPs: Auth: InvokeRole:
                                  #  - INTEGRATION.credentials except:
                                  #     - 'arn:aws:iam::*:user/*' -> 'CALLER_CREDENTIALS' (def)
                                  #     - null -> 'NONE'
                                  #  - using OOPERATION.x-amazon-apigateway-integration

AWS::Serverless::Function       =-#Includes RESPROPs: Events.EVENT: Type '[Http]Api', Properties:
                                  #  - TimeoutInMillis
                                  #     - using OOPERATION.x-amazon-apigateway-integration.*
                                 =#  - InvokeRole STR: same as above

                                  ┌────────────────────────────┐
                                  │   INTEGRATION LAMBDA SAM   │
                                  └────────────────────────────┘

AWS::Serverless::Function       =-#Includes RESPROPs: Events.EVENT:
                                  #  - Type '[Http]Api':
                                  #     - create a Lambda INTEGRATION
                                  #        - using OOPERATION.x-amazon-apigateway-integration.*
                                  #     - create a Lambda PERMISSION
                                  #  - Properties:
                                 =#     - RestApiId API Gateway API_MID
                                  #        - must be AWS::Serverless::Api not AWS::ApiGateway::RestApi
                                  #        - API must be defined in same TEMPLATE
                                  #        - def: create one named 'ServerlessRestApi'
                                 -#     - ApiId API Gateway API_MID
                                  #        - must be AWS::Serverless::HttpApi not AWS::ApiGatewayV2::HttpApi
                                  #        - API must be defined in same TEMPLATE
                                  #        - def: create an API 'ServerlessHttpApi'
                                  #     - Method 'HTTP_METHOD':
                                  #        - using OPATHDEF.HTTP_METHOD
                                 -#        - def: 'x-amazon-apigateway-any-method'
                                  #     - Path '/PATH':
                                  #        - using OPATHS./PATH
                                 -#        - def: '$default'
                                 -#     - PayloadFormatVersion STR
                                  #        - using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌──────────────────────────┐
                                  │   GATEWAY RESPONSE SAM   │
                                  └──────────────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: GatewayResponse OBJ
                                  #  - using OSPEC.x-amazon-apigateway-gateway-responses

                                  ┌───────────────┐
                                  │   MODEL SAM   │
                                  └───────────────┘

AWS::Serverless::Api             =#Include RESPROPs: Models.MODEL MODEL.schema
                                  #  - using OCOMPONENTS.definitions.MODEL

                                  ┌────────────────────┐
                                  │   VALIDATION SAM   │
                                  └────────────────────┘

AWS::Serverless::Function        =#Includes RESPROPs: Events.EVENT: Type 'Api', Properties: RequestModel: ValidateParameters|ValidateBody
                                  #  - using OSPEC.x-amazon-apigateway-request-validators and OOPERATION.x-amazon-apigateway-request-validator

                                  ┌───────────────────────┐
                                  │   AUTHORIZATION SAM   │
                                  └───────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Auth:
                                 =#  - Authorizers.AUTHORIZER OBJ or 'AWS_IAM'
                                 -#  - Authorizers.AUTHORIZER OBJ
                                 -#  - EnableIamAuthorizer BOOL (def: false)
                                  #  - DefaultAuthorizer 'AUTHORIZER'
                                 =#  - ResourcePolicy SPOLICY
                                  #     - using OSPEC.x-amazon-apigateway-policy
                                  #Using OSECURITY_DEF.x-amazon-apigateway-authorizer|authtype

AWS::Serverless::Function        =#Includes RESPROPs: Events.EVENT: Type 'Api', Properties: Auth:
                                  #  - Authorizer 'AWS_IAM', 'NONE' or a specific 'AUTHORIZER'
                                  #  - OverrideApiAuth BOOL (def: false): must be true if all of:
                                  #     - other Events.EVENT.Properties.Auth.* set
                                  #     - Events.EVENT.Properties.RestApiId set
                                  #     - API is using RESPROP DefinitionBody
                                  #  - ResourcePolicy SPOLICY
                                  #     - using OSPEC.x-amazon-apigateway-policy

SPOLICY.CustomStatements         =#IAM STATEMENT_ARR
SPOLICY.AwsAccountWhitelist      =#'ACCOUNT_ID'_ARR. Add STATEMENT with:
                                  #  - PACTION 'execute-api:Invoke'
                                  #  - PRINCIPAL.AWS 'ACCOUNT_ID'_ARR
                                  #  - Resource: ROUTE
SPOLICY.IpRangeWhitelist         =#'IP'_ARR. Same with COND_KEY 'aws:SourceIp'
SPOLICY.IntrinsicVpc[e]Whitelist =#'VPC_MID'_ARR. Same with COND_KEY 'aws:SourceVpc[e]'
SPOLICY.SourceVpcWhitelist       =#Same but with 'VPC'_ARR
SPOLICY.*Blacklist               =#Same as *Whitelist but with STATEMENT.Effect 'Deny' instead

                                  ┌────────────────────┐
                                  │   AUTHORIZER SAM   │
                                  └────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Auth: Authorizers.AUTHORIZER:
                                  #  (AUTH_TYPE 'TOKEN|REQUEST')
                                 =#  - FunctionPayloadType: AUTHORIZER.type
                                  #  - Identity:
                                  #     (AUTH_TYPE 'TOKEN|COGNITO_USER_POOLS')
                                 =#     - ValidationExpression
                                 =#     - Header 'HEADER'_ARR: AUTHORIZER.identitySource 'method.request.header.HEADER,...'
                                  #     (AUTH_TYPE 'REQUEST')
                                  #     - Headers 'HEADER'_ARR: AUTHORIZER.identitySource:
                                 =#        - 'method.request.header.HEADER,...'
                                 -#        - '$request.header.HEADER,...'
                                  #     - Context 'VAR'_ARR: AUTHORIZER.identitySource:
                                 =#        - 'context.VAR,...'
                                 -#        - '$context.VAR,...'
                                  #     - QueryStrings 'VAR'_ARR: AUTHORIZER.identitySource:
                                 =#        - 'method.request.querystring.VAR,...'
                                 -#        - '$request.querystring.VAR,...'
                                  #     - StageVariables 'STAGEVAR'_ARR: AUTHORIZER.identitySource:
                                 =#        - 'stageVariables.STAGEVAR,...'
                                 -#        - '$stageVariables.STAGEVAR,...'
                                  #     (AUTH_TYPE 'JWT')
                                 -#     - IdentitySource STR
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌────────────────────────┐
                                  │   AUTHORIZER JWT SAM   │
                                  └────────────────────────┘

AWS::Serverless::HttpApi         -#Includes RESPROPs: Auth: Authorizers.AUTHORIZER: JwtConfiguration, AuthorizationScopes
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

AWS::Serverless::Function        -#Includes RESPROPs: Events.EVENT: Type 'HttpApi', Properties: Auth: AuthorizationScopes
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌────────────────────────────┐
                                  │   AUTHORIZER COGNITO SAM   │
                                  └────────────────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: Auth: Authorizers.AUTHORIZER: UserPoolArn ARN, AuthorizationScopes
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

AWS::Serverless::Function        =#Includes RESPROPs: Events.EVENT: Type 'Api', Properties: Auth: AuthorizationScopes
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌───────────────────────────┐
                                  │   AUTHORIZER LAMBDA SAM   │
                                  └───────────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Auth: Authorizers.AUTHORIZER:
                                  #  - FunctionArn: AUTHORIZER.authorizerUri
                                  #  - FunctionInvokeRole: AUTHORIZER.authorizerCredentials
                                 =#  - DisableFunctionDefaultPermissions BOOL: if false (def), create Lambda PERMISSION
                                 -#  - EnableFunctionDefaultPermissions BOOL (def false): create Lambda PERMISSION
                                 -#  - AuthorizerPayloadFormatVersion
                                 -#  - EnableSimpleResponses
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌──────────────────────────┐
                                  │   AUTHORIZER CACHE SAM   │
                                  └──────────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Auth: Authorizers.AUTHORIZER:
                                  #  - Identity: ReauthorizeEvery: AUTHORIZER.authorizerResultTtlInSeconds
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌──────────────┐
                                  │   CORS SAM   │
                                  └──────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                  #  - Cors:
                                  #     - CORS.* except:
                                 =#        - no ExposeHeaders
                                  #        - AllowOrigin -> AllowOrigins[0]
                                  #        - can be 'ORIGIN' -> AllowOrigins[0]
                                  #     - using a OPATHDEF.options.* route
                                  #     - if INTEGRATION.type *_PROXY, CORS response headers must be implemented by backend
                                  #  - Auth:
                                 =#     - AddApiKeyRequiredToCorsPreflight BOOL (def: true): adds APIKEY to OSPEC
                                 =#     - AddDefaultAuthorizerToCorsPreflight BOOL (def: true): adds default AUTHORIZER to OSPEC

                                  ┌───────────────┐
                                  │   STAGE SAM   │
                                  └───────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                  #  - StageName
                                 -#     - def: '$default'
                                 =#  - Variables, MethodsSettings OBJ_ARR: ResourcePath, HttpMethod
                                 -#  - StageVariables
                                  #'RESOURCE' is 'API_MID{STAGE}Stage', 'SAM_RESOURCE' is 'API_MID.Stage'
                                 -#  - 'RESOURCE' is 'API_MIDApiGatewayDefaultStage' if StageName '$default'

AWS::Serverless::Function        -#Includes RESPROPs: Events.EVENT: Type 'HttpApi', Properties: RouteSettings

                                  ┌────────────────────┐
                                  │   DEPLOYMENT SAM   │
                                  └────────────────────┘

AWS::Serverless::[Http]Api      =-#Create a DEPLOYMENT
                                  #Includes RESPROPs:
                                 =#  - AlwaysDeploy BOOL: if false (def), only if there was a change
                                 =#  - CanarySetting
                                  #'RESOURCE' is 'API_MIDDeploymentHASH', 'SAM_RESOURCE' is 'API_MID.Deployment'

                                  ┌─────────────────┐
                                  │   METRICS SAM   │
                                  └─────────────────┘

AWS::Serverless::[Http]Api       =#Includes RESPROPs: MethodsSettings OBJ_ARR: MetricsEnabled
                                -~#Includes RESPROPs: DefaultRouteSettings|RouteSettings.ROUTE: DetailedMetricsEnabled

                                  ┌─────────────────┐
                                  │   LOGGING SAM   │
                                  └─────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                 =#  - MethodsSettings OBJ_ARR: LoggingLevel, DataTraceEnabled
                                 -#  - DefaultRouteSettings|RouteSettings.ROUTE: LoggingLevel, DataTraceEnabled
                                  #  - AccessLogSettings
                                 =#  - TracingEnabled

                                  ┌─────────────────┐
                                  │   CACHING SAM   │
                                  └─────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs:
                                  #  - CacheClusterEnabled, CacheClusterSize
                                  #  - MethodsSettings OBJ_ARR: CachingEnabled, CacheTtlInSeconds, CacheDataEncrypted

AWS::Serverless::Function        =#Includes RESPROPs: Events.EVENT: Type 'Api', Properties:
                                  #  - RequestParameters ARR of either 'EXPR' or OBJ: EXPR: CacheKeyParameters BOOL (def: false)
                                  #Using OOPERATION.x-amazon-apigateway-integration.*

                                  ┌───────────────────────┐
                                  │   IMPORT/EXPORT SAM   │
                                  └───────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                  #  - DefinitionBody RAW_API_EXPORT_OBJ
                                  #     - def: automatically created
                                  #  - DefinitionUri OBJ: Bucket 'BUCKET', Key 'OBJECT', Version VERSION_MID
                                  #     - can use `sam package` (not `aws cloudformation package`)
                                  #     - unlike DefinitionBody, does not set any OSPEC.**
                                 =#  - MergeDefinitions BOOL (def: false)
                                  #     - if non-default DefinitionBody set, merge it with the OSPEC.** set by other properties
                                 =#  - OpenApiVersion API_EXPORT_TYPE
                                  #     - using OSPEC2.swagger or OSPEC3.openapi
                                  #     - either '2.0' (def) or '3.0.1'
                                 -#     - always '3.0.1'
                                 =#  - Mode
                                  #  - FailOnWarnings

                                  ┌─────────────────────┐
                                  │   DOMAIN NAME SAM   │
                                  └─────────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                  #  - Domain: DomainName, EndpointConfiguration STR
                                 =#  - DisableExecuteApiEndpoint
                                  #     - using OSPEC2|OSERVER3.x-amazon-apigateway-endpoint-configuration.disableExecuteApiEndpoint
                                 =#  - EndpointConfiguration: Type STR
                                  #'RESOURCE' is 'ApiGatewayDomainName[V2]HASH', 'SAM_RESOURCE' is 'API_MID.DomainName'

                                  ┌─────────────────────┐
                                  │   PRIVATE API SAM   │
                                  └─────────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: EndpointConfiguration: VpcEndpointIds

                                  ┌─────────────┐
                                  │   TLS SAM   │
                                  └─────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Domain:
                                  #  - CertificateArn: DNAME.[Regional]CertificateArn
                                  #  - SecurityPolicy
                                  #  - OwnershipVerificationCertificateArn
                                  #  - MutualTlsAuthentication
                                  #     - no TruststoreWarnings

                                  ┌─────────────────┐
                                  │   MAPPING SAM   │
                                  └─────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Domain:
                                  #  - BasePath 'BASEPATH'_ARR (def: ['/'])
                                 =#  - NormalizeBasePath BOOL (def: true): strip invalid chars

                                  ┌────────────────────┐
                                  │   USAGE PLAN SAM   │
                                  └────────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: Auth: UsagePlan:
                                  #  - UsagePlanName, Description, Tags
                                  #  - CreateUsagePlan: configure creation of USAGEPLAN, USAGEKEY, APIKEY among:
                                  #     - 'NONE': no creation
                                  #     - 'PER_API': 'USAGE_API_MID' is 'API_MID'
                                  #     - 'SHARED': 'USAGE_API_MID' is 'Serverless', i.e.:
                                  #        - shared by all APIs in TEMPLATE
                                  #        - must be specified by only one AWS::Serverless::Api
                                  #'RESOURCE' is 'USAGE_API_MIDUsagePlan', 'SAM_RESOURCE' is 'API_MID.UsagePlan'

                                  ┌──────────────────┐
                                  │   THROTTLE SAM   │
                                  └──────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs:
                                 =#  - MethodsSettings OBJ_ARR: ThrottlingRate, ThrottlingBurstLimit
                                 -#  - DefaultRouteSettings|RouteSettings.ROUTE: ThrottlingRate, ThrottlingBurstLimit
                                 =#  - Auth: UsagePlan: Throttle, Quota, ApiStages OBJ_ARR: Throttle

                                  ┌────────────────────────┐
                                  │   USAGE PLAN KEY SAM   │
                                  └────────────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: Auth: UsagePlan: creates USAGEKEY
                                  #'RESOURCE' is 'USAGE_API_MIDUsagePlanKey', 'SAM_RESOURCE' is 'API_MID.UsagePlanKey'

                                  ┌─────────────────┐
                                  │   API KEY SAM   │
                                  └─────────────────┘

AWS::Serverless::Api             =#Includes RESPROPs: Auth:
                                  #  - UsagePlan: creates APIKEY
                                  #  - ApiKeySourceType
                                  #  - ApiKeyRequired
                                  #'RESOURCE' is 'USAGE_API_MIDApiKey', 'SAM_RESOURCE' is 'API_MID.ApiKey'

AWS::Serverless::Function        =#Includes RESPROPs: Events.EVENT: Type 'Api', Properties: Auth:
                                  #  - ApiKeyRequired BOOL: using OSECURITY_DEF|OSECURITY_USES

                                  ┌─────────────────┐
                                  │   ROUTE53 SAM   │
                                  └─────────────────┘

AWS::Serverless::[Http]Api      =-#Includes RESPROPs: Domain: Route53 RECORD_SET:
                                  #  - HostedZoneId
                                  #  - HostedZoneName
                                  #  - Region
                                  #  - SetIdentifier
                                  #  - IpV6 BOOL (def: false): RECORD_SET.Type 'A|AAAA'
                                  #  - DistributionDomainName: RECORD_SET.AliasTarget.DNSName (def: 'DNAME')
                                  #  - EvaluateTargetHealth

                                  ┌──────────────────┐
                                  │   FUNCTION SAM   │
                                  └──────────────────┘

AWS::Serverless::Function         #Expands to Lambda FUNCTION and its ROLE
                                  #Optionally, expands to Lambda:
                                  #  - FUNC_VERSION
                                  #  - ALIAS
                                  #  - FUNC_URL
                                  #  - EVENT_INVOKE
                                  #Optionally, also to:
                                  #  - SQS QUEUE
                                  #  - SNS TOPIC
                                  #  - CodeDeploy APPLICATION, DEPLOYMENT_GROUP, ROLE
                                  #Optionally, also to TRIGGERs:
                                  #  - Lambda EVENT_SOURCE
                                  #  - API Gateway INTEGRATION (and API, RESOURCE, METHOD, REQVALID)
                                  #  - S3 NOTIFICATIONS
                                  #  - CloudWatch Logs SUBSCRIPTION
                                  #  - SNS SUBSCRIPTION
                                  #  - EventBridge RULE
                                  #  - EventBridge Scheduler SCHEDULE
                                  #  - IoT TOPIC_RULE
                                  #Missing features:
                                  #  - ALIAS.RoutingConfig
                                  #  - RESOURCE-specific tags
                                  #Includes RESPROPs:
                                  #  - Description
                                  #  - VersionDescription
                                  #     - only if RESPROP AutoPublishAlias set

                                  ┌─────────────────────┐
                                  │   IDENTIFIERS SAM   │
                                  └─────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs:
                                  #  - FunctionName
                                  #  - AutoPublishCodeSha256: FUNC_VERSION.CodeSha256
                                  #     - only if RESPROP AutoPublishAlias set
                                  #Includes RESATTRs: Arn

                                  ┌─────────────────┐
                                  │   VERSION SAM   │
                                  └─────────────────┘

AWS::Serverless::Function         #Includes RESPROPs:
                                  #  - AutoPublishAlias 'ALIAS' (def: none)
                                  #     - creates FUNC_VERSION:
                                  #        - 'RESOURCE' is 'FUNCTIONVersionHASH', 'SAM_RESOURCE' is 'FUNCTION.Version'
                                  #        - RESOURCE.DeletionPolicy 'Retain'
                                  #  - AutoPublishAliasAllProperties BOOL:
                                  #     - skip creating a FUNC_VERSION if none of the following AWS::Serverless::Function RESPROPs changed:
                                  #        - false (def): *Code*, ImageUri, Environment, MemorySize, SnapStart, AutoPublishCodeSha256
                                  #        - true: any
                                  #     - only if AutoPublishAlias set

                                  ┌───────────────┐
                                  │   ALIAS SAM   │
                                  └───────────────┘

AWS::Serverless::Function         #Includes RESPROPs: AutoPublishAlias 'ALIAS' (def: none)
                                  #  - creates ALIAS: 'RESOURCE' is 'FUNCTIONAliasALIAS', 'SAM_RESOURCE' is 'FUNCTION.Alias'

                                  ┌──────────────┐
                                  │   CODE SAM   │
                                  └──────────────┘

AWS::Serverless::Function         #Includes RESPROPs: PackageType

                                  ┌──────────────────┐
                                  │   CODE ZIP SAM   │
                                  └──────────────────┘

AWS::Serverless::Function         #Includes RESPROPs:
                                  #  - InlineCode STR: NEW_FUNC_CODE.ZipFile
                                  #  - CodeUri S3 'URI' or OBJ: Bucket|Key|Version
                                  #     - can use `sam package` (not `aws cloudformation package`)
                                  #  - SourceKMSKeyArn

                                  ┌────────────────────┐
                                  │   CODE IMAGE SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: ImageUri, ImageConfig

                                  ┌───────────────────────┐
                                  │   LAYER VERSION SAM   │
                                  └───────────────────────┘

AWS::Serverless::LayerVersion     #Transformed to a LAYER_VERSION
                                  #Includes RESPROPs:
                                  #  - LayerName (def: 'RESOURCE'): 'LAYER'
                                  #  - Description, LicenseInfo
                                  #  - ContentUri S3 'URI' or OBJ: Bucket|Key|Version
                                  #     - can use `sam package` (not `aws cloudformation package`)
                                  #  - RetentionPolicy (def: 'Retain'): RESOURCE.DeletionPolicy
                                  #     - should consider setting RESOURCE.UpdateReplacePolicy too
                                  #'RESOURCE' is 'LAYER{HASH}'
AWS::Serverless::Function         #Includes RESPROPs: Layers

                                  ┌─────────────────┐
                                  │   RUNTIME SAM   │
                                  └─────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Runtime, Handler
AWS::Serverless::LayerVersion     #Includes RESPROPs: CompatibleRuntimes

                                  ┌─────────────────────────┐
                                  │   RUNTIME VERSION SAM   │
                                  └─────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: RuntimeManagementConfig

                                  ┌────────────────┐
                                  │   MEMORY SAM   │
                                  └────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: MemorySize

                                  ┌─────────────┐
                                  │   CPU SAM   │
                                  └─────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Architectures
AWS::Serverless::LayerVersion     #Includes RESPROPs: CompatibleArchitectures

                                  ┌───────────────────────────────┐
                                  │   ENVIRONMENT VARIABLES SAM   │
                                  └───────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Environment, KmsKeyArn

                                  ┌────────────────────┐
                                  │   FILESYSTEM SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: EphemeralStorage, FileSystemConfigs

                                  ┌────────────────────┐
                                  │   NETWORKING SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: VpcConfig

                                  ┌─────────────────┐
                                  │   LOGGING SAM   │
                                  └─────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: LoggingConfig

                                  ┌─────────────────────────────┐
                                  │   PERMISSION IDENTITY SAM   │
                                  └─────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs:
                                  #  - Role
                                  #     - def: automatically creates ROLE 'FUNCTIONRole'
                                  #        - AWSLambdaBasicExecutionRole AWS managed POLICY
                                  #        - AWSXrayWriteOnlyAccess AWS managed POLICY: unless RESPROP Tracing 'Disabled'
                                  #  (for default RESPROP Role)
                                  #  - AssumeRolePolicyDocument
                                  #     - same as AWS::IAM::Role
                                  #     - def: allows lambda.amazonaws.com, no COND_KEYs
                                  #  - RolePath, PermissionsBoundary: same as AWS::IAM::Role
                                  #  - Policies SAM_POLICIES

SAM_POLICIES                      #Value of AWS::Serverless::Function|StateMachine RESPROP Policies (see their docs)
                                  #Similar to AWS::IAM::Role but as VAL[_ARR] among:
                                  #     - POLICY_ARN
                                  #     - 'POLICY': AWS managed policy
                                  #     - POLICY_DOC_OBJ
                                  #        - generated 'POLICY' name is 'FUNCTIONPolicyNUM'
                                  #     - POLICY_TEMPLATE: POLICY_TEMPLATE_PARAMS

POLICY_TEMPLATE                   #Built-in SERVICE-specific POLICY_DOCs
                                  #Documented in their respective SERVICEs
POLICY_TEMPLATE_PARAMS            #OBJ of parameters passed to POLICY_TEMPLATE
                                  #Some POLICY_TEMPLATEs do not have any, i.e. must be empty OBJ

                                  ┌───────────────────────────────┐
                                  │   CODE SIGNING FUNCTION ARN   │
                                  └───────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: CodeSigningConfigArn

                                  ┌───────────────────┐
                                  │   STREAMING ARN   │
                                  └───────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: FunctionUrlConfig: InvokeMode

                                  ┌─────────────┐
                                  │   URL ARN   │
                                  └─────────────┘

AWS::Serverless::Function         #Includes RESPROPs: FunctionUrlConfig: AuthType, Cors

                                  ┌────────────────┐
                                  │   ERRORS ARN   │
                                  └────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Tracing 'Active', 'PassThrough' or 'Disabled' (def)

                                  ┌─────────────────┐
                                  │   TIMEOUT ARN   │
                                  └─────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Timeout

                                  ┌───────────────────┐
                                  │   RECURSION ARN   │
                                  └───────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: RecursiveLoop

                                  ┌───────────────────────────┐
                                  │   ASYNC DESTINATION ARN   │
                                  └───────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: EventInvokeConfig: DestinationConfig:
                                  #  - Type STR
                                  #     - create an EVENT_INVOKE 'FUNCTIONEventInvokeConfig'
                                  #  - Destination STR
                                  #     - def: creates an empty:
                                  #        - SNS TOPIC 'FUNCTIONOnSuccess|FailureTopic', with 'SAM_RESOURCE' 'FUNCTION.DestinationTopic'
                                  #        - SQS QUEUE 'FUNCTIONOnSuccess|FailureQueue', with 'SAM_RESOURCE' 'FUNCTION.DestinationQueue'

                                  ┌───────────────────────────┐
                                  │   ASYNC DEAD LETTER SAM   │
                                  └───────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: DeadLetterQueue: Type 'SQS|SNS', TargetArn 'ARN'

                                  ┌─────────────────────┐
                                  │   ASYNC RETRY SAM   │
                                  └─────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: EventInvokeConfig: MaximumEventAgeInSeconds, MaximumRetryAttempts

                                  ┌────────────────────┐
                                  │   BATCH MAIN SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT:
                                  #  - Type 'DocumentDB|DynamoDB|Kinesis|MSK|MQ|SelfManagedKafka|SQS'
                                  #  - Properties: BatchSize, MaximumBatchingWindowInSeconds, SourceAccessConfigurations,
                                  #    StartingPosition[Timestamp], Enabled BOOL
                                  #Create an EVENT_SOURCE named 'FUNCTION{EVENT}'

                                  ┌──────────────────────┐
                                  │   BATCH FILTER SAM   │
                                  └──────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties: FilterCriteria, KmsKeyArn

                                  ┌─────────────────────┐
                                  │   BATCH KAFKA SAM   │
                                  └─────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties: Stream 'ARN', Topics, ConsumerGroupId, KafkaBootstrapServers

                                  ┌──────────────────┐
                                  │   BATCH MQ SAM   │
                                  └──────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties:
                                  #  - Broker 'ARN'
                                  #  - Queues
                                  #  - DynamicPolicyName BOOL:
                                  #     - whether to name generated ROLE 'SamAutoGeneratedAMQPolicy' (false, def) or random (true, recommended)
                                  #     - regardless: always generate a ROLE
                                  #  - SecretsManagerKmsKeyId KMS KEY_MID

                                  ┌───────────────────┐
                                  │   BATCH SQS SAM   │
                                  └───────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties: Queue 'QUEUE_ARN', ScalingConfig, FunctionResponseTypes

                                  ┌───────────────────────┐
                                  │   BATCH KINESIS SAM   │
                                  └───────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties:
                                  #  - Stream 'ARN'
                                  #  - FunctionResponseTypes, TumblingWindowInSeconds, ParallelizationFactor, BisectBatchOnFunctionError,
                                  #    MaximumRetryAttempts, MaximumRecordAgeInSeconds

                                  ┌────────────────────────┐
                                  │   BATCH DYNAMODB SAM   │
                                  └────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties:
                                  #  - Stream 'ARN'
                                  #  - FunctionResponseTypes, TumblingWindowInSeconds, ParallelizationFactor, BisectBatchOnFunctionError,
                                  #    MaximumRetryAttempts, MaximumRecordAgeInSeconds

                                  ┌──────────────────────────┐
                                  │   BATCH DOCUMENTDB SAM   │
                                  └──────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties:
                                  #  - Cluster 'ARN'
                                  #  - SecretsManagerKmsKeyId KMS KEY_MID
                                  #  - DatabaseName, CollectionName, FullDocument

                                  ┌───────────────────────────┐
                                  │   BATCH DESTINATION SAM   │
                                  └───────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT: Properties: DestinationConfig

                                  ┌──────────────────────────────┐
                                  │   CONCURRENCY RESERVED SAM   │
                                  └──────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: ReservedConcurrentExecutions

                                  ┌─────────────────────────────────┐
                                  │   CONCURRENCY PROVISIONED SAM   │
                                  └─────────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: ProvisionedConcurrencyConfig
                                  #  - only if RESPROP AutoPublishAlias set

                                  ┌────────────────────┐
                                  │   SNAP START SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: SnapStart

                                  ┌──────────────┐
                                  │   TAGS SAM   │
                                  └──────────────┘

AWS::Serverless::Function         #Includes RESPROPs:
                                  #  - Tags OBJ
                                  #  - PropagateTags BOOL: whether Tags targets:
                                  #     - false (def): FUNCTION
                                  #     - true: all generated RESOURCEs

                                  ┌────────────────────┐
                                  │   CODEDEPLOY SAM   │
                                  └────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: DeploymentPreference OBJ:
                                  #  - Enabled BOOL (def: false): create a CodeDeploy:
                                  #     - APPLICATION 'ServerlessDeploymentApplication' (singleton per STACK)
                                  #     - DEPLOYMENT_GROUP 'FUNCTIONDeploymentGroup'
                                  #  - Role ROLE_ARN
                                  #     - AWS::CodeDeploy::DeploymentGroup RESPROP ServiceRoleArn
                                  #     - def: automatically create ROLE 'CodeDeployServiceRole' (singleton per STACK)
                                  #  - TriggerConfigurations: same as AWS::CodeDeploy::DeploymentGroup RESPROP TriggerConfigurations
                                  #  - Alarms ARR: same as AWS::CodeDeploy::DeploymentGroup RESPROP AlarmConfiguration.Alarms
                                  #  - Hooks OBJ: PreTraffic|PostTraffic: same as AWS::CodeDeploy::DeploymentGroup
                                  #    RESOURCE.UpdatePolicy.CodeDeployLambdaAliasUpdate.Before|AfterAllowTrafficHook
                                  #  - PassthroughCondition BOOL (def: false, recommended: true): copy RESOURCE.Condition
                                  #    from AWS::Serverless::Function to AWS::CodeDeploy::DeploymentGroup
                                  #  - Type 'Linear10Percent5|10|15|30Minutes', 'Canary10Percent5|10|15|30Minutes', 'AllAtOnce': not documented yet
                                  #Only if RESPROP AutoPublishAlias set

                                  ┌────────────────────────────┐
                                  │   NOTIFICATIONS MAIN SAM   │
                                  └────────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT:
                                  #  - Type 'S3': create a NOTIFICATIONS + Lambda PERMISSION 'FUNCTION{EVENT}Permission'
                                  #  - Properties:
                                  #     - Bucket 'BUCKET'
                                  #        - must be in same TEMPLATE
                                  #     - Events STR[_ARR]
                                  #     - Filter OBJ
                                  #        - FilterRules -> Rules

                                  ┌───────────────────────────┐
                                  │   SUBSCRIPTION MAIN SAM   │
                                  └───────────────────────────┘

AWS::Serverless::Function         #Includes RESPROPs: Events.EVENT:
                                  #  - Type 'CloudWatchLogs': create a SUBSCRIPTION + Lambda PERMISSION 'FUNCTION{EVENT}Permission'
                                  #  - Properties: FilterPattern, LogGroupName

                                  ┌───────────────────┐
                                  │   CONNECTOR SAM   │
                                  └───────────────────┘

AWS::Serverless::Connector        #Transformed to an identity|resource-based POLICY, depending on SERVICE:
                                  #  - IAM MPOLICY 'CONNECTORPolicy'
                                  #  - Lambda PERMISSION 'CONNECTOR[Read][Write]LambdaPermission'
                                  #  - SQS QUEUE_POLICY 'CONNECTORQueuePolicy'
                                  #  - SNS TOPIC_POLICY 'CONNECTORTopicPolicy'
                                  #Includes RESPROPs:
                                  #  - Source RESOURCE_REF: first RESOURCE
                                  #  - Destination RESOURCE_REF[_ARR]:
                                  #     - second RESOURCE
                                  #     - if ARR:
                                  #        - multiple POLICYs created
                                  #        - appends 'DestinationNUM' to generated 'RESOURCE' name
                                  #  - Permissions STR_ARR
                                  #     - STR is 'Read' or 'Write'
                                  #     - which is available is SERVICE-specific
                                  #Available RESTYPEs for Source + Destination pair is SERVICE-specific
                                  #Documented in each respective SERVICE

RESOURCE.Connectors.CONNECTOR     #Alternative syntax as TEMPLATE.Resources.CONNECTOR except:
                                  #  - RESOURCE.Type implied to be 'AWS::Serverless::Connector'
                                  #  - RESPROP Source -> SourceReference:
                                  #     - optional
                                  #     - only requires RESOURCE_REF.Qualifier (if needed)

RESOURCE_REF                      #Targets a RESOURCE using:
                                  #  - if in same TEMPLATE: only Id
                                  #     - and Qualifier, if needed
                                  #  - else all of:
                                  #     - Type: required
                                  #     - Arn|ResourceId|RoleName: which one is used is SERVICE-specific
                                  #     - Name|QueueUrl|Qualifier: only for specific SERVICEs
RESOURCE_REF.Id                   #'RESOURCE'. LogicalResourceId (name in TEMPLATE)
RESOURCE_REF.Type                 #'RESTYPE'
RESOURCE_REF.Arn                  #'ARN'
RESOURCE_REF.ResourceId           #'RESOURCE_MID'
RESOURCE_REF.RoleName             #'ROLE'
RESOURCE_REF.Name                 #'RESOURCE' name. PhysicalResourceId
RESOURCE_REF.QueueUrl             #'QUEUE_ARN'
RESOURCE_REF.Qualifier            #STR

AWS::Serverless::*                #Always available as an alternative RESTYPE, i.e. can use either:
                                  #  - FUNCTION: AWS::Lambda|Serverless::Function
                                  #  - STATE_MACHINE: AWS::StepFunctions|Serverless::StateMachine
                                  #  - TABLE: AWS::DynamoDB::Table or AWS::Serverless::SimpleTable
                                  #  - API: AWS::ApiGateway::RestApi, AWS::Serverless::Api or AWS::ApiGatewayV2|Serverless::HttpApi

RESOURCE
 .Metadata['aws:sam:connectors']
 .CONNECTOR.Source|Destination
 .Type                            #'RESTYPE'. Set on generated MPOLICY|PERMISSION|QUEUE_POLICY|TOPIC_POLICY

LAMBDA ==>                        #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Destination: FUNCTION2 (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing lambda:InvokeFunction|InvokeAsync
                                  #  - on FUNCTION2

API GATEWAY ==>                   #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: API (RESOURCE_REF.ResourceId + RESOURCE_REF.Qualifier)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a Lambda PERMISSION on FUNCTION:
                                  #  - allowing SERVICE apigateway.amazonaws.com
                                  #  - to lambda:InvokeFunction
                                  #  - SourceArn CALL_ROUTE_PREFIX/QUALIFIER

S3 ==>                            #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: BUCKET (RESOURCE_REF.Arn)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a Lambda PERMISSION on FUNCTION:
                                  #  - allowing SERVICE s3.amazonaws.com
                                  #  - to lambda:InvokeFunction
                                  #  - SourceArn BUCKET_ARN
                                  #  - SourceAccount ACCOUNT_ID
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION or Step Functions STATE_MACHINE (RESOURCE_REF.RoleName)
                                  #  - Destination: BUCKET (RESOURCE_REF.Arn)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing:
                                  #     - Read: s3:ListBucket[Versions], s3:List[Bucket]MultipartUploads,
                                  #       s3:GetObject[Version][Acl|Torrent|LegalHold|Retention|ForReplication]
                                  #     - Write: s3:PutObject[LegalHold|Retention], s3:DeleteObject[Version],
                                  #       s3:RestoreObject, s3:AbortMultipartUpload
                                  #  - on BUCKET and BUCKET/*

SQS ==>                           #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: SNS TOPIC or EventBridge RULE (RESOURCE_REF.Arn)
                                  #  - Destination: QUEUE (RESOURCE_REF.Arn + RESOURCE_REF.QueueUrl)
                                  #  - Permissions 'Write'
                                  #Transformed to a QUEUE_POLICY on QUEUE (from QueueUrl):
                                  #  - allowing SERVICE sns|events.amazonaws.com
                                  #  - to sqs:SendMessage
                                  #  - on QUEUE2 (from Arn)
                                  #  - COND_KEY aws:SourceArn TOPIC_ARN|RULE_ARN
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: QUEUE (RESOURCE_REF.Arn)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing:
                                  #     - Read: sqs:ReceiveMessage|GetQueueAttributes
                                  #     - Write: sqs:DeleteMessage
                                  #  - on QUEUE
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Destination: QUEUE (RESOURCE_REF.Arn)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing:
                                  #     - Read: sqs:ReceiveMessage|GetQueueAttributes
                                  #     - Write: sqs:DeleteMessage|SendMessage|ChangeMessageVisibility|PurgeQueue
                                  #  - on QUEUE
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: STATE_MACHINE (RESOURCE_REF.RoleName)
                                  #  - Destination: QUEUE (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing sqs:SendMessage
                                  #  - on QUEUE

SNS ==>                           #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: TOPIC (RESOURCE_REF.Arn)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a Lambda PERMISSION on FUNCTION:
                                  #  - allowing SERVICE sns.amazonaws.com
                                  #  - to lambda:InvokeFunction
                                  #  - SourceArn TOPIC_ARN
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION or Step Functions STATE_MACHINE (RESOURCE_REF.RoleName)
                                  #  - Destination: TOPIC (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing sns:Publish
                                  #  - on TOPIC
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: EventBridge RULE (RESOURCE_REF.Arn)
                                  #  - Destination: TOPIC (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a TOPIC_POLICY on TOPIC:
                                  #  - allowing SERVICE events.amazonaws.com
                                  #  - to sns:Publish
                                  #  - COND_KEY aws:SourceArn RULE_ARN

STEP FUNCTIONS ==>                #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: STATE_MACHINE (RESOURCE_REF.RoleName)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing lambda:InvokeFunction|InvokeAsync
                                  #  - on FUNCTION
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Destination: STATE_MACHINE (RESOURCE_REF.Arn + RESOURCE_REF.Name)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing on STATE_MACHINE (from Arn):
                                  #     - Read: states:ListExecutions|DescribeStateMachine
                                  #     - Write: states:Start[Sync]Execution
                                  #  - allowing on EXECUTION/* (from Name):
                                  #     - Read: states:DescribeExecution|DescribeStateMachineForExecution|GetExecutionHistory
                                  #     - Write: states:StopExecution
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: STATE_MACHINE (RESOURCE_REF.RoleName)
                                  #  - Destination: STATE_MACHINE2 (RESOURCE_REF.Arn + RESOURCE_REF.Name)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing on STATE_MACHINE2 (from Arn):
                                  #     - Write: states:StartExecution
                                  #  - allowing on EXECUTION/* (from Name):
                                  #     - Read: states:DescribeExecution
                                  #     - Write: states:StopExecution
                                  #  - allowing on RULE 'StepFunctionsGetEventsForStepFunctionsExecutionRule':
                                  #     - Read: states:DescribeRule
                                  #     - Write: states:PutRule|PutTargets
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: EventBridge RULE (RESOURCE_REF.RoleName)
                                  #  - Destination: STATE_MACHINE (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing states:StartExecution
                                  #  - on STATE_MACHINE

EVENT BRIDGE ==>                  #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION, Step Functions STATE_MACHINE,
                                  #    EventBridge RULE, AppSync DATA_SOURCE (RESOURCE_REF.RoleName)
                                  #  - Destination: EVENT_BUS (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing events:PutEvents
                                  #  - on EVENT_BUS
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: RULE (RESOURCE_REF.Arn)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a Lambda PERMISSION on FUNCTION:
                                  #  - allowing SERVICE events.amazonaws.com
                                  #  - to lambda:InvokeFunction
                                  #  - SourceArn RULE_ARN

DYNAMODB ==>                      #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION, Step Functions STATE_MACHINE or AppSync DATA_SOURCE (RESOURCE_REF.RoleName)
                                  #  - Destination: TABLE (RESOURCE_REF.Arn)
                                  #  - Permissions 'Read' and|or 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing:
                                  #     - Read: dynamodb:[Batch]GetItem|Query|Scan|ConditionCheckItem|PartiQLSelect
                                  #     - Write: dynamodb:PutItem|UpdateItem||DeleteItem|BatchWriteItem,
                                  #       dynamodb:PartiQLInsert|Update|Delete
                                  #  - on TABLE and TABLE/index/*
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: TABLE (RESOURCE_REF.Arn)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Permissions 'Read'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing dynamodb:DescribeStream|ListStreams|GetRecords|GetShardIterator
                                  #  - on any TABLE's STREAM

APPSYNC ==>                       #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: DATA_SOURCE (RESOURCE_REF.RoleName)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing lambda:InvokeFunction|InvokeAsync
                                  #  - on FUNC_ARN + FUNC_ARN:*
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: GRAPHQL_API (RESOURCE_REF.ResourceId)
                                  #  - Destination: Lambda FUNCTION (RESOURCE_REF.Arn)
                                  #  - Permissions 'Write'
                                  #Transformed to a Lambda PERMISSION on FUNCTION:
                                  #  - allowing SERVICE appsync.amazonaws.com
                                  #  - to lambda:InvokeFunction
                                  #  - SourceArn GRAPHQL_API_ARN

LOCATION SERVICE ==>              #
AWS::Serverless::Connector        #Can be used with:
                                  #  - Source: Lambda FUNCTION (RESOURCE_REF.RoleName)
                                  #  - Destination: PLACE_INDEX (RESOURCE_REF.Arn)
                                  #  - Permissions 'Read'
                                  #Transformed to a MPOLICY on 'ROLE':
                                  #  - allowing geo:DescribePlaceIndex|GetPlace|SearchPlaceIndexFor*
                                  #  - on PLACE_INDEX
