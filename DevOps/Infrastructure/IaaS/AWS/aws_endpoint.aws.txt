
                                  ┏━━━━━━━━━━━━━━━━━━┓
                                  ┃   AWS_ENDPOINT   ┃
                                  ┗━━━━━━━━━━━━━━━━━━┛

                                  ┌──────────────┐
                                  │   ENDPOINT   │
                                  └──────────────┘

SERVICE_DOMAIN                    #'SERVICE.amazonaws.com'
                                  #Used to identity a SERVICE sometimes

SERVICE_FULL_DOMAIN               #'[ACCOUNT_ID.]SERVICE[-fips][.dualstack][.REGION].AWS_DOMAIN'
                                  #Used to make API calls
                                  #If SERVICE is REGION-less: no REGION, but can be 'us-gov'

                                  ┌─────────────────────┐
                                  │   ENDPOINT CONFIG   │
                                  └─────────────────────┘

CONFIG[.services.SERVICE]
 .endpoint_url
ENVVAR
 AWS_ENDPOINT_URL[_{SERVICE}]     #'SERVICE_FULL_DOMAIN', to override it

CONFIG.ignore_configured
 _endpoint_urls
ENVVAR AWS_IGNORE_CONFIGURED
 _ENDPOINT_URLS                   #Ignore CONFIG.endpoint_url and ENVVAR AWS_ENDPOINT_URL

                                  ┌────────────────┐
                                  │   TOP DOMAIN   │
                                  └────────────────┘

AWS_DOMAIN                        #Either:
                                  #  - 'amazonaws.com': for most SERVICEs, it is the only one
                                  #  - 'amazonaws.com.cn': with PARTITION 'aws-cn'
                                  #  - 'api.aws'
                                  #      - for somewhat recent SERVICEs, both can be used
                                  #      - for recent SERVICEs, it is the only one

                                  ┌─────────────┐
                                  │   ACCOUNT   │
                                  └─────────────┘

ACCOUNT-BASED ENDPOINT ==>        #When prefixing SERVICE_FULL_DOMAIN with ACCOUNT_ID
                                  #Optional. Only for some SERVICEs (e.g. DynamoDB)
                                  #In general, more performant
                                  #However, less performant if using a single CLIENT for multiple ACCOUNTs

                                  ┌────────────────────┐
                                  │   ACCOUNT CONFIG   │
                                  └────────────────────┘

CONFIG.account_id_endpoint_mode   #Whether to use account-based endpoint:
ENVVAR                            #  - 'disabled': never
 AWS_ACCOUNT_ID_ENDPOINT_MODE     #  - 'preferred' (def): yes, if there is an ACCOUNT_ID
                                  #  - 'required': yes, fail if no ACCOUNT_ID

                                  ┌─────────────────┐
                                  │   ACCOUNT SDK   │
                                  └─────────────────┘

COPTS.accountIdEndpointMode       #Like CONFIG.account_id_endpoint_mode

                                  ┌──────────┐
                                  │   FIPS   │
                                  └──────────┘

FIPS ==>                          #Some SERVICEs can use FIPS 140-2
                                  #Optional. Only for US|Canada REGIONs

                                  ┌─────────────────┐
                                  │   FIPS CONFIG   │
                                  └─────────────────┘

CONFIG.use_fips_endpoint
ENVVAR AWS_USE_FIPS_ENDPOINT      #BOOL (def: false)

                                  ┌───────────────┐
                                  │   DUALSTACK   │
                                  └───────────────┘

DUALSTACK ==>                     #Some SERVICEs support both IPv4|6

                                  ┌──────────────────────┐
                                  │   DUALSTACK CONFIG   │
                                  └──────────────────────┘

CONFIG.use_dualstack_endpoint
ENVVAR AWS_USE_DUALSTACK_ENDPOINT #BOOL (def: false)

CONFIG.endpoint_discovery_enabled
ENVVAR                            #BOOL. Uses some intermediary ACTION (like "DescribeEndpoints") to find the SERVICE main enpoint.
 AWS_ENABLE_ENDPOINT_DISCOVERY    #Def: depends on SERVICE.

CONFIG.api_versions.SERVICE       #'SVERSION' (def: last)
